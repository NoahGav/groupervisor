var fl=Object.defineProperty;var hl=(e,t,n)=>t in e?fl(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var ps=(e,t,n)=>(hl(e,typeof t!="symbol"?t+"":t,n),n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerpolicy&&(i.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?i.credentials="include":s.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function x(){}function kn(e,t){for(const n in t)e[n]=t[n];return e}function Ei(e){return e()}function ms(){return Object.create(null)}function yt(e){e.forEach(Ei)}function Rr(e){return typeof e=="function"}function at(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function dl(e){return Object.keys(e).length===0}function Ci(e,...t){if(e==null)return x;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function wt(e,t,n){e.$$.on_destroy.push(Ci(t,n))}function Oi(e,t,n,r){if(e){const s=Ai(e,t,n,r);return e[0](s)}}function Ai(e,t,n,r){return e[1]&&r?kn(n.ctx.slice(),e[1](r(t))):n.ctx}function Ii(e,t,n,r){if(e[2]&&r){const s=e[2](r(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const i=[],o=Math.max(t.dirty.length,s.length);for(let l=0;l<o;l+=1)i[l]=t.dirty[l]|s[l];return i}return t.dirty|s}return t.dirty}function Ti(e,t,n,r,s,i){if(s){const o=Ai(t,n,r,i);e.p(o,s)}}function $i(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let r=0;r<n;r++)t[r]=-1;return t}return-1}function ws(e){const t={};for(const n in e)n[0]!=="$"&&(t[n]=e[n]);return t}function Ri(e,t,n){return e.set(n),t}function m(e,t){e.appendChild(t)}function O(e,t,n){e.insertBefore(t,n||null)}function C(e){e.parentNode&&e.parentNode.removeChild(e)}function _e(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function y(e){return document.createElement(e)}function j(e){return document.createTextNode(e)}function R(){return j(" ")}function ce(){return j("")}function it(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function w(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function vn(e){return e===""?null:+e}function gl(e){return Array.from(e.childNodes)}function X(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function At(e,t){e.value=t==null?"":t}function B(e,t,n,r){n===null?e.style.removeProperty(t):e.style.setProperty(t,n,r?"important":"")}function Sn(e,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===t){r.selected=!0;return}}e.selectedIndex=-1}function Li(e){const t=e.querySelector(":checked")||e.options[0];return t&&t.__value}function _s(e,t){return new e(t)}let Ue;function Te(e){Ue=e}function Ln(){if(!Ue)throw new Error("Function called outside component initialization");return Ue}function pl(e){Ln().$$.on_mount.push(e)}function Mn(e){Ln().$$.on_destroy.push(e)}function ys(e,t){return Ln().$$.context.set(e,t),t}function Dn(e){return Ln().$$.context.get(e)}const Oe=[],bs=[],dn=[],ks=[],ml=Promise.resolve();let ur=!1;function wl(){ur||(ur=!0,ml.then(Mi))}function Ne(e){dn.push(e)}const Gn=new Set;let sn=0;function Mi(){const e=Ue;do{for(;sn<Oe.length;){const t=Oe[sn];sn++,Te(t),_l(t.$$)}for(Te(null),Oe.length=0,sn=0;bs.length;)bs.pop()();for(let t=0;t<dn.length;t+=1){const n=dn[t];Gn.has(n)||(Gn.add(n),n())}dn.length=0}while(Oe.length);for(;ks.length;)ks.pop()();ur=!1,Gn.clear(),Te(e)}function _l(e){if(e.fragment!==null){e.update(),yt(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Ne)}}const gn=new Set;let qt;function ht(){qt={r:0,c:[],p:qt}}function dt(){qt.r||yt(qt.c),qt=qt.p}function D(e,t){e&&e.i&&(gn.delete(e),e.i(t))}function I(e,t,n,r){if(e&&e.o){if(gn.has(e))return;gn.add(e),qt.c.push(()=>{gn.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}else r&&r()}function yl(e,t){const n={},r={},s={$$scope:1};let i=e.length;for(;i--;){const o=e[i],l=t[i];if(l){for(const c in o)c in l||(r[c]=1);for(const c in l)s[c]||(n[c]=l[c],s[c]=1);e[i]=l}else for(const c in o)s[c]=1}for(const o in r)o in n||(n[o]=void 0);return n}function vs(e){return typeof e=="object"&&e!==null?e:{}}function H(e){e&&e.c()}function P(e,t,n,r){const{fragment:s,after_update:i}=e.$$;s&&s.m(t,n),r||Ne(()=>{const o=e.$$.on_mount.map(Ei).filter(Rr);e.$$.on_destroy?e.$$.on_destroy.push(...o):yt(o),e.$$.on_mount=[]}),i.forEach(Ne)}function z(e,t){const n=e.$$;n.fragment!==null&&(yt(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function bl(e,t){e.$$.dirty[0]===-1&&(Oe.push(e),wl(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function gt(e,t,n,r,s,i,o,l=[-1]){const c=Ue;Te(e);const a=e.$$={fragment:null,ctx:[],props:i,update:x,not_equal:s,bound:ms(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:ms(),dirty:l,skip_bound:!1,root:t.target||c.$$.root};o&&o(a.root);let u=!1;if(a.ctx=n?n(e,t.props||{},(f,d,...h)=>{const g=h.length?h[0]:d;return a.ctx&&s(a.ctx[f],a.ctx[f]=g)&&(!a.skip_bound&&a.bound[f]&&a.bound[f](g),u&&bl(e,f)),d}):[],a.update(),u=!0,yt(a.before_update),a.fragment=r?r(a.ctx):!1,t.target){if(t.hydrate){const f=gl(t.target);a.fragment&&a.fragment.l(f),f.forEach(C)}else a.fragment&&a.fragment.c();t.intro&&D(e.$$.fragment),P(e,t.target,t.anchor,t.customElement),Mi()}Te(c)}class pt{$destroy(){z(this,1),this.$destroy=x}$on(t,n){if(!Rr(n))return x;const r=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return r.push(n),()=>{const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}$set(t){this.$$set&&!dl(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ge=[];function Ui(e,t){return{subscribe:Ae(e,t).subscribe}}function Ae(e,t=x){let n;const r=new Set;function s(l){if(at(e,l)&&(e=l,n)){const c=!ge.length;for(const a of r)a[1](),ge.push(a,e);if(c){for(let a=0;a<ge.length;a+=2)ge[a][0](ge[a+1]);ge.length=0}}}function i(l){s(l(e))}function o(l,c=x){const a=[l,c];return r.add(a),r.size===1&&(n=t(s)||x),l(e),()=>{r.delete(a),r.size===0&&(n(),n=null)}}return{set:s,update:i,subscribe:o}}function kl(e,t,n){const r=!Array.isArray(e),s=r?[e]:e,i=t.length<2;return Ui(n,o=>{let l=!1;const c=[];let a=0,u=x;const f=()=>{if(a)return;u();const h=t(r?c[0]:c,o);i?o(h):u=Rr(h)?h:x},d=s.map((h,g)=>Ci(h,p=>{c[g]=p,a&=~(1<<g),l&&f()},()=>{a|=1<<g}));return l=!0,f(),function(){yt(d),u()}})}const fr={},hr={};function qn(e){return{...e.location,state:e.history.state,key:e.history.state&&e.history.state.key||"initial"}}function vl(e,t){const n=[];let r=qn(e);return{get location(){return r},listen(s){n.push(s);const i=()=>{r=qn(e),s({location:r,action:"POP"})};return e.addEventListener("popstate",i),()=>{e.removeEventListener("popstate",i);const o=n.indexOf(s);n.splice(o,1)}},navigate(s,{state:i,replace:o=!1}={}){i={...i,key:Date.now()+""};try{o?e.history.replaceState(i,null,s):e.history.pushState(i,null,s)}catch{e.location[o?"replace":"assign"](s)}r=qn(e),n.forEach(l=>l({location:r,action:"PUSH"}))}}}function Sl(e="/"){let t=0;const n=[{pathname:e,search:""}],r=[];return{get location(){return n[t]},addEventListener(s,i){},removeEventListener(s,i){},history:{get entries(){return n},get index(){return t},get state(){return r[t]},pushState(s,i,o){const[l,c=""]=o.split("?");t++,n.push({pathname:l,search:c}),r.push(s)},replaceState(s,i,o){const[l,c=""]=o.split("?");n[t]={pathname:l,search:c},r[t]=s}}}}const Dl=Boolean(typeof window<"u"&&window.document&&window.document.createElement),dr=vl(Dl?window:Sl()),{navigate:Ni}=dr,Bi=/^:(.+)/,Ss=4,El=3,Cl=2,Ol=1,Al=1;function Il(e){return e===""}function Tl(e){return Bi.test(e)}function ji(e){return e[0]==="*"}function gr(e){return e.replace(/(^\/+|\/+$)/g,"").split("/")}function Xn(e){return e.replace(/(^\/+|\/+$)/g,"")}function $l(e,t){const n=e.default?0:gr(e.path).reduce((r,s)=>(r+=Ss,Il(s)?r+=Al:Tl(s)?r+=Cl:ji(s)?r-=Ss+Ol:r+=El,r),0);return{route:e,score:n,index:t}}function Rl(e){return e.map($l).sort((t,n)=>t.score<n.score?1:t.score>n.score?-1:t.index-n.index)}function xi(e,t){let n,r;const[s]=t.split("?"),i=gr(s),o=i[0]==="",l=Rl(e);for(let c=0,a=l.length;c<a;c++){const u=l[c].route;let f=!1;if(u.default){r={route:u,params:{},uri:t};continue}const d=gr(u.path),h={},g=Math.max(i.length,d.length);let p=0;for(;p<g;p++){const _=d[p],v=i[p];if(_!==void 0&&ji(_)){const k=_==="*"?"*":_.slice(1);h[k]=i.slice(p).map(decodeURIComponent).join("/");break}if(v===void 0){f=!0;break}let A=Bi.exec(_);if(A&&!o){const k=decodeURIComponent(v);h[A[1]]=k}else if(_!==v){f=!0;break}}if(!f){n={route:u,params:h,uri:"/"+i.slice(0,p).join("/")};break}}return n||r||null}function Ll(e,t){return xi([e],t)}function Ds(e,t){return`${Xn(t==="/"?e:`${Xn(e)}/${Xn(t)}`)}/`}function Ml(e){let t;const n=e[9].default,r=Oi(n,e,e[8],null);return{c(){r&&r.c()},m(s,i){r&&r.m(s,i),t=!0},p(s,[i]){r&&r.p&&(!t||i&256)&&Ti(r,n,s,s[8],t?Ii(n,s[8],i,null):$i(s[8]),null)},i(s){t||(D(r,s),t=!0)},o(s){I(r,s),t=!1},d(s){r&&r.d(s)}}}function Ul(e,t,n){let r,s,i,{$$slots:o={},$$scope:l}=t,{basepath:c="/"}=t,{url:a=null}=t;const u=Dn(fr),f=Dn(hr),d=Ae([]);wt(e,d,b=>n(6,s=b));const h=Ae(null);let g=!1;const p=u||Ae(a?{pathname:a}:dr.location);wt(e,p,b=>n(5,r=b));const _=f?f.routerBase:Ae({path:c,uri:c});wt(e,_,b=>n(7,i=b));const v=kl([_,h],([b,$])=>{if($===null)return b;const{path:U}=b,{route:S,uri:et}=$;return{path:S.default?U:S.path.replace(/\*.*$/,""),uri:et}});function A(b){const{path:$}=i;let{path:U}=b;if(b._path=U,b.path=Ds($,U),typeof window>"u"){if(g)return;const S=Ll(b,r.pathname);S&&(h.set(S),g=!0)}else d.update(S=>(S.push(b),S))}function k(b){d.update($=>{const U=$.indexOf(b);return $.splice(U,1),$})}return u||(pl(()=>dr.listen($=>{p.set($.location)})),ys(fr,p)),ys(hr,{activeRoute:h,base:_,routerBase:v,registerRoute:A,unregisterRoute:k}),e.$$set=b=>{"basepath"in b&&n(3,c=b.basepath),"url"in b&&n(4,a=b.url),"$$scope"in b&&n(8,l=b.$$scope)},e.$$.update=()=>{if(e.$$.dirty&128){const{path:b}=i;d.update($=>($.forEach(U=>U.path=Ds(b,U._path)),$))}if(e.$$.dirty&96){const b=xi(s,r.pathname);h.set(b)}},[d,p,_,c,a,r,s,i,l,o]}class Nl extends pt{constructor(t){super(),gt(this,t,Ul,Ml,at,{basepath:3,url:4})}}const Bl=e=>({params:e&4,location:e&16}),Es=e=>({params:e[2],location:e[4]});function Cs(e){let t,n,r,s;const i=[xl,jl],o=[];function l(c,a){return c[0]!==null?0:1}return t=l(e),n=o[t]=i[t](e),{c(){n.c(),r=ce()},m(c,a){o[t].m(c,a),O(c,r,a),s=!0},p(c,a){let u=t;t=l(c),t===u?o[t].p(c,a):(ht(),I(o[u],1,1,()=>{o[u]=null}),dt(),n=o[t],n?n.p(c,a):(n=o[t]=i[t](c),n.c()),D(n,1),n.m(r.parentNode,r))},i(c){s||(D(n),s=!0)},o(c){I(n),s=!1},d(c){o[t].d(c),c&&C(r)}}}function jl(e){let t;const n=e[10].default,r=Oi(n,e,e[9],Es);return{c(){r&&r.c()},m(s,i){r&&r.m(s,i),t=!0},p(s,i){r&&r.p&&(!t||i&532)&&Ti(r,n,s,s[9],t?Ii(n,s[9],i,Bl):$i(s[9]),Es)},i(s){t||(D(r,s),t=!0)},o(s){I(r,s),t=!1},d(s){r&&r.d(s)}}}function xl(e){let t,n,r;const s=[{location:e[4]},e[2],e[3]];var i=e[0];function o(l){let c={};for(let a=0;a<s.length;a+=1)c=kn(c,s[a]);return{props:c}}return i&&(t=_s(i,o())),{c(){t&&H(t.$$.fragment),n=ce()},m(l,c){t&&P(t,l,c),O(l,n,c),r=!0},p(l,c){const a=c&28?yl(s,[c&16&&{location:l[4]},c&4&&vs(l[2]),c&8&&vs(l[3])]):{};if(i!==(i=l[0])){if(t){ht();const u=t;I(u.$$.fragment,1,0,()=>{z(u,1)}),dt()}i?(t=_s(i,o()),H(t.$$.fragment),D(t.$$.fragment,1),P(t,n.parentNode,n)):t=null}else i&&t.$set(a)},i(l){r||(t&&D(t.$$.fragment,l),r=!0)},o(l){t&&I(t.$$.fragment,l),r=!1},d(l){l&&C(n),t&&z(t,l)}}}function Fl(e){let t,n,r=e[1]!==null&&e[1].route===e[7]&&Cs(e);return{c(){r&&r.c(),t=ce()},m(s,i){r&&r.m(s,i),O(s,t,i),n=!0},p(s,[i]){s[1]!==null&&s[1].route===s[7]?r?(r.p(s,i),i&2&&D(r,1)):(r=Cs(s),r.c(),D(r,1),r.m(t.parentNode,t)):r&&(ht(),I(r,1,1,()=>{r=null}),dt())},i(s){n||(D(r),n=!0)},o(s){I(r),n=!1},d(s){r&&r.d(s),s&&C(t)}}}function Vl(e,t,n){let r,s,{$$slots:i={},$$scope:o}=t,{path:l=""}=t,{component:c=null}=t;const{registerRoute:a,unregisterRoute:u,activeRoute:f}=Dn(hr);wt(e,f,_=>n(1,r=_));const d=Dn(fr);wt(e,d,_=>n(4,s=_));const h={path:l,default:l===""};let g={},p={};return a(h),typeof window<"u"&&Mn(()=>{u(h)}),e.$$set=_=>{n(13,t=kn(kn({},t),ws(_))),"path"in _&&n(8,l=_.path),"component"in _&&n(0,c=_.component),"$$scope"in _&&n(9,o=_.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&r&&r.route===h&&n(2,g=r.params);{const{path:_,component:v,...A}=t;n(3,p=A)}},t=ws(t),[c,r,g,p,s,f,d,h,l,o,i]}class on extends pt{constructor(t){super(),gt(this,t,Vl,Fl,at,{path:8,component:0})}}function Be(){return Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Be.apply(this,arguments)}function Pl(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,pr(e,t)}function pr(e,t){return pr=Object.setPrototypeOf||function(r,s){return r.__proto__=s,r},pr(e,t)}function zl(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var pn=0;function Fi(){return pn>0}function mr(e){pn++;try{return e()}finally{pn--,pn===0&&Jl()}}var Lr=function(){function e(n){this.trigger=n,this.observing=new Map}var t=e.prototype;return t.registerConnection=function(r){var s=this.observing.get(r.observable);s||(s={byKey:new Set,iterate:!1},this.observing.set(r.observable,s)),r.type==="iterate"?s.iterate=!0:s.byKey.add(r.key)},t.removeObservers=function(){var r=this;this.observing.forEach(function(s,i){s.iterate&&i[Z].connections.iterate.delete(r),s.byKey.forEach(function(o){i[Z].connections.byKey.get(o).delete(r)})}),this.observing.clear()},e}(),Qt=[],Un=function(e){Pl(t,e);function t(r,s,i){var o;if(o=e.call(this,function(){return o._trigger()})||this,o.func=r,o.options=s,o.effect=i,o.isInitial=!0,o.reaction=function(){Qt.push(zl(o));try{o.func()}finally{Qt.pop()}o.effect&&(!o.isInitial||o.options.fireImmediately)&&o.effect(),o.isInitial=!1},!i&&!o.options.fireImmediately)throw new Error("if no effect function passed, should always fireImmediately");return o.reaction(),o}var n=t.prototype;return n._trigger=function(){if(Qt.includes(this))throw new Error("already running reaction");this.removeObservers(),this.reaction()},t}(Lr);function Vi(){return!!Qt.length}function Pi(){return Qt.length?Qt[Qt.length-1]:void 0}function Hl(e,t,n){var r=Be({name:"unnamed",fireImmediately:!0},n),s=new Un(e,r,t);return s}var wr=!1;function zi(){return wr}function Hi(e){wr=!0;try{e()}finally{wr=!1}}function Kl(e){return function(){return Hi(e)}}var _r=[];function Jl(){var e=[].concat(_r);_r=[],Ki(e)}function Ki(e){var t=new Set;e.forEach(function(n){var r;(n.type==="add"||n.type==="delete")&&n.observable[Z].connections.iterate.forEach(function(s){t.add(s)}),(r=n.observable[Z].connections.byKey.get(n.key))==null||r.forEach(function(s){t.add(s)})}),t.forEach(function(n){n.trigger()})}function ln(e){if(Fi()){_r.push(e);return}Ki([e])}function Os(e,t){if(e.type==="iterate")e.observable[Z].connections.iterate.add(t);else{var n=e.observable[Z].connections.byKey.get(e.key);n||(n=new Set,e.observable[Z].connections.byKey.set(e.key,n)),n.add(t)}}function cn(e,t){if(!zi()){var n=Pi();n&&(Os(e,n),n.registerConnection(e)),t&&(Os(e,t),t.registerConnection(e))}}var Mr=Symbol("$skipreactive"),Z=Symbol("$reactive"),_t=Symbol("$reactiveproxy");function We(e,t){return!!(e&&e[_t]&&e[_t].implicitObserver===t)}function Ur(e){return e[Mr]=!0,e}function Ji(e){return!!(e&&!We(e)&&e[Z])}function yr(e,t,n){if(n===void 0&&(n=!1),e[Mr]||We(e,t))return e;var r=Yl(e,n);if(!t)return r;var s=r[Z].proxiesWithImplicitObserver.get(t);if(!s){var i={implicitObserver:t};Object.setPrototypeOf(i,Yi),s=new Proxy(r[Z].raw,i),r[Z].proxiesWithImplicitObserver.set(t,s)}return s}var je=yr;function Yl(e,t){if(t===void 0&&(t=!1),We(e))return e;if(Ji(e))return e[Z].proxy;if(e[Z]||e[_t])throw new Error("unexpected");var n={connections:{iterate:new Set,byKey:new Map},proxy:{},raw:e,proxiesWithImplicitObserver:new Map,shallow:t};Object.defineProperty(e,Z,{enumerable:!1,writable:!0,configurable:!0,value:n});var r=new Proxy(e,Yi);return n.proxy=r,r}var Yi={has:function(t,n){var r=Reflect.has(t,n);return typeof n=="symbol"||cn({observable:t,key:n,type:"has"},this.implicitObserver),r},get:function(t,n,r){if(n===_t)return{implicitObserver:this.implicitObserver};var s=Reflect.get(t,n,r);if(typeof n=="symbol")return s;if(n==="length"&&Array.isArray(t)?cn({observable:t,type:"iterate"},this.implicitObserver):cn({observable:t,key:n,type:"get"},this.implicitObserver),Ji(s))return yr(s,this.implicitObserver);if(t[Z].shallow)return s;if(typeof s=="object"&&s!==null&&!We(s,this.implicitObserver)&&!Object.isFrozen(s)){var i=Reflect.getOwnPropertyDescriptor(t,n);if((!i||!(i.writable===!1&&i.configurable===!1))&&(Vi()||this.implicitObserver))return yr(s,this.implicitObserver)}return s},ownKeys:function(t){return cn({observable:t,type:"iterate"},this.implicitObserver),Reflect.ownKeys(t)},set:function(t,n,r,s){return mr(function(){if(typeof n=="symbol")return Reflect.set(t,n,r,s);var i=Object.hasOwnProperty.call(t,n),o=Reflect.get(t,n,s),l=Reflect.set(t,n,r,s);if(!i)ln({observable:t,key:n,value:r,type:"add"});else if(r!==o)if(n==="length"&&Array.isArray(t)){if(!(o<r))for(var c=r+1;c<=o;c++)ln({observable:t,key:""+(c-1),oldValue:void 0,type:"delete"})}else ln({observable:t,key:n,value:r,oldValue:o,type:"update"});return l})},deleteProperty:function(t,n){return mr(function(){if(typeof n=="symbol")return Reflect.deleteProperty(t,n);var r=Object.hasOwnProperty.call(t,n),s=Reflect.get(t,n),i=Reflect.deleteProperty(t,n);return r&&ln({observable:t,key:n,oldValue:s,type:"delete"}),i})},preventExtensions:function(t){throw new Error("Dynamic observable objects cannot be frozen")}};function Wl(e,t){var n=Be({name:"unnamed",fireImmediately:!0},t),r=new Un(e,n);return r}function Gl(e,t,n){var r=Be({name:"unnamed",fireImmediately:!0},n),s=new Un(function(){e(t)},r);return t=je(t,s),t.bla=4,r.fireImmediately&&s.trigger(),s}var Wi=function(){function e(){this._observable=je({_key:1})}var t=e.prototype;return t.reportObserved=function(r){return je(this._observable,r)._key},t.reportChanged=function(){this._observable._key++},e}();function ql(e,t,n){return new Wi}const Xl=Object.freeze(Object.defineProperty({__proto__:null,$reactive:Z,$reactiveproxy:_t,$skipreactive:Mr,Atom:Wi,Observer:Lr,Reaction:Un,autorun:Wl,autorunAsync:Gl,createAtom:ql,hasRunningReaction:Vi,isActionRunning:Fi,isReactive:We,isTrackingDisabled:zi,markRaw:Ur,reaction:Hl,reactive:je,runInAction:mr,runningReaction:Pi,untracked:Hi,untrackedCB:Kl},Symbol.toStringTag,{value:"Module"})),It=()=>new Map,En=e=>{const t=It();return e.forEach((n,r)=>{t.set(r,n)}),t},Vt=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},Ql=(e,t)=>{const n=[];for(const[r,s]of e)n.push(t(s,r));return n},Zl=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},xe=()=>new Set,Qn=e=>e[e.length-1],tc=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},Gi=Array.from;class Nn{constructor(){this._observers=It()}on(t,n){Vt(this._observers,t,xe).add(n)}once(t,n){const r=(...s)=>{this.off(t,r),n(...s)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return Gi((this._observers.get(t)||It()).values()).forEach(r=>r(...n))}destroy(){this._observers=It()}}const jt=Math.floor,mn=Math.abs,Nr=(e,t)=>e<t?e:t,ae=(e,t)=>e>t?e:t,ec=Math.pow,qi=e=>e!==0?e<0:1/e<0,nc=String.fromCharCode,rc=e=>e.toLowerCase(),sc=/^\s*/g,ic=e=>e.replace(sc,""),oc=/([A-Z])/g,As=(e,t)=>ic(e.replace(oc,n=>`${t}${rc(n)}`)),lc=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.codePointAt(s);return r},Fe=typeof TextEncoder<"u"?new TextEncoder:null,cc=e=>Fe.encode(e),ac=Fe?cc:lc;let $e=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});$e&&$e.decode(new Uint8Array).length===1&&($e=null);const Is=e=>e===void 0?null:e;class uc{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let Xi=new uc,Qi=!0;try{typeof localStorage<"u"&&(Xi=localStorage,Qi=!1)}catch{}const Zi=Xi,fc=e=>Qi||addEventListener("storage",e),hc=Object.keys,dc=(e,t)=>{const n=[];for(const r in e)n.push(t(e[r],r));return n},Cn=e=>hc(e).length,gc=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},to=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),pc=(e,t)=>e===t||Cn(e)===Cn(t)&&gc(e,(n,r)=>(n!==void 0||to(t,r))&&t[r]===n),Br=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&Br(e,t,n+1)}},mc=(e,t)=>e===t,Re=(e,t)=>{if(e==null||t==null)return mc(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!Re(e.get(n),t.get(n)))return!1;break}case Object:if(Cn(e)!==Cn(t))return!1;for(const n in e)if(!to(e,n)||!Re(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!Re(e[n],t[n]))return!1;break;default:return!1}return!0},wc=(e,t)=>t.includes(e),ee=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name),eo=typeof window<"u"&&!ee;typeof navigator<"u"&&/Mac/.test(navigator.platform);let Ot;const _c=()=>{if(Ot===void 0)if(ee){Ot=It();const e=process.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Ot.set(t,""),t=r):t!==null&&(Ot.set(t,r),t=null)}t!==null&&Ot.set(t,"")}else typeof location=="object"?(Ot=It(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Ot.set(`--${As(t,"-")}`,n),Ot.set(`-${As(t,"-")}`,n)}})):Ot=It();return Ot},br=e=>_c().has(e),kr=e=>Is(ee?process.env[e.toUpperCase()]:Zi.getItem(e)),yc=e=>br("--"+e)||kr(e)!==null;yc("production");const Ts=ee&&wc(process.env.FORCE_COLOR,["true","1","2"]),bc=!br("no-colors")&&(!ee||process.stdout.isTTY||Ts)&&(!ee||br("color")||Ts||kr("COLORTERM")!==null||(kr("TERM")||"").includes("color")),$s=1,Rs=2,Zn=4,tr=8,Ve=32,Bt=64,ft=128,Bn=31,vr=63,Zt=127,kc=2147483647,no=Number.MAX_SAFE_INTEGER,vc=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&jt(e)===e);class jn{constructor(t){this.arr=t,this.pos=0}}const Gt=e=>new jn(e),Sc=e=>e.pos!==e.arr.length,Dc=(e,t)=>{const n=Fr(e.arr.buffer,e.pos+e.arr.byteOffset,t);return e.pos+=t,n},ot=e=>Dc(e,L(e)),ye=e=>e.arr[e.pos++],L=e=>{let t=0,n=1;for(;;){const r=e.arr[e.pos++];if(t=t+(r&Zt)*n,n*=128,r<ft)return t;if(t>no)throw new Error("Integer out of range!")}},jr=e=>{let t=e.arr[e.pos++],n=t&vr,r=64;const s=(t&Bt)>0?-1:1;if((t&ft)===0)return s*n;for(;;){if(t=e.arr[e.pos++],n=n+(t&Zt)*r,r*=128,t<ft)return s*n;if(n>no)throw new Error("Integer out of range!")}},Ec=e=>{let t=L(e);if(t===0)return"";{let n=String.fromCodePoint(ye(e));if(--t<100)for(;t--;)n+=String.fromCodePoint(ye(e));else for(;t>0;){const r=t<1e4?t:1e4,s=e.arr.subarray(e.pos,e.pos+r);e.pos+=r,n+=String.fromCodePoint.apply(null,s),t-=r}return decodeURIComponent(escape(n))}},Cc=e=>$e.decode(ot(e)),Jt=$e?Cc:Ec,xr=(e,t)=>{const n=new DataView(e.arr.buffer,e.arr.byteOffset+e.pos,t);return e.pos+=t,n},Oc=e=>xr(e,4).getFloat32(0,!1),Ac=e=>xr(e,8).getFloat64(0,!1),Ic=e=>xr(e,8).getBigInt64(0,!1),Tc=[e=>{},e=>null,jr,Oc,Ac,Ic,e=>!1,e=>!0,Jt,e=>{const t=L(e),n={};for(let r=0;r<t;r++){const s=Jt(e);n[s]=Pe(e)}return n},e=>{const t=L(e),n=[];for(let r=0;r<t;r++)n.push(Pe(e));return n},ot],Pe=e=>Tc[127-ye(e)](e);class Ls extends jn{constructor(t,n){super(t),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Sc(this)?this.count=L(this)+1:this.count=-1),this.count--,this.s}}class wn extends jn{constructor(t){super(t),this.s=0,this.count=0}read(){if(this.count===0){this.s=jr(this);const t=qi(this.s);this.count=1,t&&(this.s=-this.s,this.count=L(this)+2)}return this.count--,this.s}}class er extends jn{constructor(t){super(t),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){const t=jr(this),n=t&1;this.diff=jt(t/2),this.count=1,n&&(this.count=L(this)+2)}return this.s+=this.diff,this.count--,this.s}}class $c{constructor(t){this.decoder=new wn(t),this.str=Jt(this.decoder),this.spos=0}read(){const t=this.spos+this.decoder.read(),n=this.str.slice(this.spos,t);return this.spos=t,n}}const ro=e=>new Uint8Array(e),Fr=(e,t,n)=>new Uint8Array(e,t,n),Rc=e=>new Uint8Array(e),Lc=e=>{let t="";for(let n=0;n<e.byteLength;n++)t+=nc(e[n]);return btoa(t)},Mc=e=>Buffer.from(e.buffer,e.byteOffset,e.byteLength).toString("base64"),Uc=e=>{const t=atob(e),n=ro(t.length);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n},Nc=e=>{const t=Buffer.from(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)},Bc=eo?Lc:Mc,jc=eo?Uc:Nc,xc=e=>{const t=ro(e.byteLength);return t.set(e),t};class Ge{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const lt=()=>new Ge,Vr=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},K=e=>{const t=new Uint8Array(Vr(e));let n=0;for(let r=0;r<e.bufs.length;r++){const s=e.bufs[r];t.set(s,n),n+=s.length}return t.set(Fr(e.cbuf.buffer,0,e.cpos),n),t},Fc=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(Fr(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(ae(n,t)*2),e.cpos=0)},nt=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},Sr=nt,E=(e,t)=>{for(;t>Zt;)nt(e,ft|Zt&t),t=jt(t/128);nt(e,Zt&t)},Pr=(e,t)=>{const n=qi(t);for(n&&(t=-t),nt(e,(t>vr?ft:0)|(n?Bt:0)|vr&t),t=jt(t/64);t>0;)nt(e,(t>Zt?ft:0)|Zt&t),t=jt(t/128)},Dr=new Uint8Array(3e4),Vc=Dr.length/3,Pc=(e,t)=>{if(t.length<Vc){const n=Fe.encodeInto(t,Dr).written||0;E(e,n);for(let r=0;r<n;r++)nt(e,Dr[r])}else W(e,ac(t))},zc=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;E(e,r);for(let s=0;s<r;s++)nt(e,n.codePointAt(s))},te=Fe&&Fe.encodeInto?Pc:zc,xn=(e,t)=>{const n=e.cbuf.length,r=e.cpos,s=Nr(n-r,t.length),i=t.length-s;e.cbuf.set(t.subarray(0,s),r),e.cpos+=s,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(ae(n*2,i)),e.cbuf.set(t.subarray(s)),e.cpos=i)},W=(e,t)=>{E(e,t.byteLength),xn(e,t)},zr=(e,t)=>{Fc(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},Hc=(e,t)=>zr(e,4).setFloat32(0,t,!1),Kc=(e,t)=>zr(e,8).setFloat64(0,t,!1),Jc=(e,t)=>zr(e,8).setBigInt64(0,t,!1),Ms=new DataView(new ArrayBuffer(4)),Yc=e=>(Ms.setFloat32(0,e),Ms.getFloat32(0)===e),ze=(e,t)=>{switch(typeof t){case"string":nt(e,119),te(e,t);break;case"number":vc(t)&&mn(t)<=kc?(nt(e,125),Pr(e,t)):Yc(t)?(nt(e,124),Hc(e,t)):(nt(e,123),Kc(e,t));break;case"bigint":nt(e,122),Jc(e,t);break;case"object":if(t===null)nt(e,126);else if(t instanceof Array){nt(e,117),E(e,t.length);for(let n=0;n<t.length;n++)ze(e,t[n])}else if(t instanceof Uint8Array)nt(e,116),W(e,t);else{nt(e,118);const n=Object.keys(t);E(e,n.length);for(let r=0;r<n.length;r++){const s=n[r];te(e,s),ze(e,t[s])}}break;case"boolean":nt(e,t?120:121);break;default:nt(e,127)}};class Us extends Ge{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&E(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}const Ns=e=>{e.count>0&&(Pr(e.encoder,e.count===1?e.s:-e.s),e.count>1&&E(e.encoder,e.count-2))};class _n{constructor(){this.encoder=new Ge,this.s=0,this.count=0}write(t){this.s===t?this.count++:(Ns(this),this.count=1,this.s=t)}toUint8Array(){return Ns(this),K(this.encoder)}}const Bs=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);Pr(e.encoder,t),e.count>1&&E(e.encoder,e.count-2)}};class nr{constructor(){this.encoder=new Ge,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(Bs(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return Bs(this),K(this.encoder)}}class Wc{constructor(){this.sarr=[],this.s="",this.lensE=new _n}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new Ge;return this.sarr.push(this.s),this.s="",te(t,this.sarr.join("")),xn(t,this.lensE.toUint8Array()),K(t)}}const js=typeof crypto>"u"?null:crypto,Gc=js!==null?e=>{const t=new ArrayBuffer(e),n=new Uint8Array(t);return js.getRandomValues(n),t}:e=>{const t=new ArrayBuffer(e),n=new Uint8Array(t);for(let r=0;r<e;r++)n[r]=Math.ceil(Math.random()*4294967295>>>0);return t},so=()=>new Uint32Array(Gc(4))[0],qc=[1e7]+-1e3+-4e3+-8e3+-1e11,Xc=()=>qc.replace(/[018]/g,e=>(e^so()&15>>e/4).toString(16)),ne=Date.now,Fn=e=>new Promise(e),qe=e=>new Error(e),Tt=()=>{throw qe("Method unimplemented")},Rt=()=>{throw qe("Unexpected case")},Pt=Symbol;class Qc{constructor(t,n){this.left=t,this.right=n}}const Nt=(e,t)=>new Qc(e,t),ue=typeof document<"u"?document:{};typeof DOMParser<"u"&&new DOMParser;const Zc=e=>Ql(e,(t,n)=>`${n}:${t};`).join("");ue.ELEMENT_NODE;ue.TEXT_NODE;ue.CDATA_SECTION_NODE;ue.COMMENT_NODE;ue.DOCUMENT_NODE;ue.DOCUMENT_TYPE_NODE;ue.DOCUMENT_FRAGMENT_NODE;const Hr=Pt(),Kr=Pt(),io=Pt(),oo=Pt(),lo=Pt(),Jr=Pt(),co=Pt(),Yr=Pt(),ao=Pt(),ta={[Hr]:Nt("font-weight","bold"),[Kr]:Nt("font-weight","normal"),[io]:Nt("color","blue"),[lo]:Nt("color","green"),[oo]:Nt("color","grey"),[Jr]:Nt("color","red"),[co]:Nt("color","purple"),[Yr]:Nt("color","orange"),[ao]:Nt("color","black")},uo={[Hr]:"\x1B[1m",[Kr]:"\x1B[2m",[io]:"\x1B[34m",[lo]:"\x1B[32m",[oo]:"\x1B[37m",[Jr]:"\x1B[31m",[co]:"\x1B[35m",[Yr]:"\x1B[38;5;208m",[ao]:"\x1B[0m"},ea=e=>{const t=[],n=[],r=It();let s=[],i=0;for(;i<e.length;i++){const o=e[i],l=ta[o];if(l!==void 0)r.set(l.left,l.right);else if(o.constructor===String||o.constructor===Number){const c=Zc(r);i>0||c.length>0?(t.push("%c"+o),n.push(c)):t.push(o)}else break}for(i>0&&(s=n,s.unshift(t.join("")));i<e.length;i++){const o=e[i];o instanceof Symbol||s.push(o)}return s},na=e=>{const t=[],n=[];let r=0;for(;r<e.length;r++){const s=e[r];if(uo[s]===void 0)if(s.constructor===String||s.constructor===Number)t.push(s);else break}for(r>0&&n.push(t.join(""));r<e.length;r++){const s=e[r];s instanceof Symbol||(s.constructor===Object?n.push(JSON.stringify(s)):n.push(s))}return n},ra=e=>{const t=[],n=[];let r=0;for(;r<e.length;r++){const s=e[r],i=uo[s];if(i!==void 0)t.push(i);else if(s.constructor===String||s.constructor===Number)t.push(s);else break}for(r>0&&(t.push("\x1B[0m"),n.push(t.join("")));r<e.length;r++){const s=e[r];s instanceof Symbol||n.push(s)}return n},sa=bc?ee?ra:ea:na,ia=(...e)=>{console.log(...sa(e)),oa.forEach(t=>t.print(e))},oa=new Set,fo=e=>({[Symbol.iterator](){return this},next:e}),la=(e,t)=>fo(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),rr=(e,t)=>fo(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}});class Wr{constructor(t,n){this.clock=t,this.len=n}}class Xe{constructor(){this.clients=new Map}}const Er=(e,t,n)=>t.clients.forEach((r,s)=>{const i=e.doc.store.clients.get(s);for(let o=0;o<r.length;o++){const l=r[o];Oo(e,i,l.clock,l.len,n)}}),ca=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const s=jt((n+r)/2),i=e[s],o=i.clock;if(o<=t){if(t<o+i.len)return s;n=s+1}else r=s-1}return null},ho=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&ca(n,t.clock)!==null},Gr=e=>{e.clients.forEach(t=>{t.sort((s,i)=>s.clock-i.clock);let n,r;for(n=1,r=1;n<t.length;n++){const s=t[r-1],i=t[n];s.clock+s.len>=i.clock?s.len=ae(s.len,i.clock+i.len-s.clock):(r<n&&(t[r]=i),r++)}t.length=r})},aa=e=>{const t=new Xe;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,s)=>{if(!t.clients.has(s)){const i=r.slice();for(let o=n+1;o<e.length;o++)tc(i,e[o].clients.get(s)||[]);t.clients.set(s,i)}});return Gr(t),t},On=(e,t,n,r)=>{Vt(e.clients,t,()=>[]).push(new Wr(n,r))},go=()=>new Xe,ua=e=>{const t=go();return e.clients.forEach((n,r)=>{const s=[];for(let i=0;i<n.length;i++){const o=n[i];if(o.deleted){const l=o.id.clock;let c=o.length;if(i+1<n.length)for(let a=n[i+1];i+1<n.length&&a.deleted;a=n[++i+1])c+=a.length;s.push(new Wr(l,c))}}s.length>0&&t.clients.set(r,s)}),t},Se=(e,t)=>{E(e.restEncoder,t.clients.size),t.clients.forEach((n,r)=>{e.resetDsCurVal(),E(e.restEncoder,r);const s=n.length;E(e.restEncoder,s);for(let i=0;i<s;i++){const o=n[i];e.writeDsClock(o.clock),e.writeDsLen(o.len)}})},qr=e=>{const t=new Xe,n=L(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const s=L(e.restDecoder),i=L(e.restDecoder);if(i>0){const o=Vt(t.clients,s,()=>[]);for(let l=0;l<i;l++)o.push(new Wr(e.readDsClock(),e.readDsLen()))}}return t},xs=(e,t,n)=>{const r=new Xe,s=L(e.restDecoder);for(let i=0;i<s;i++){e.resetDsCurVal();const o=L(e.restDecoder),l=L(e.restDecoder),c=n.clients.get(o)||[],a=rt(n,o);for(let u=0;u<l;u++){const f=e.readDsClock(),d=f+e.readDsLen();if(f<a){a<d&&On(r,o,a,d-a);let h=vt(c,f),g=c[h];for(!g.deleted&&g.id.clock<f&&(c.splice(h+1,0,Rn(t,g,f-g.id.clock)),h++);h<c.length&&(g=c[h++],g.id.clock<d);)g.deleted||(d<g.id.clock+g.length&&c.splice(h,0,Rn(t,g,d-g.id.clock)),g.delete(t))}else On(r,o,f,d-f)}}if(r.clients.size>0){const i=new re;return E(i.restEncoder,0),Se(i,r),i.toUint8Array()}return null},po=so;class fe extends Nn{constructor({guid:t=Xc(),collectionid:n=null,gc:r=!0,gcFilter:s=()=>!0,meta:i=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=s,this.clientID=po(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new Eo,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.whenLoaded=Fn(c=>{this.on("load",()=>{this.isLoaded=!0,c(this)})})}load(){const t=this._item;t!==null&&!this.shouldLoad&&F(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Array.from(this.subdocs).map(t=>t.guid))}transact(t,n=null){F(this,t,n)}get(t,n=Y){const r=Vt(this.share,t,()=>{const i=new n;return i._integrate(this,null),i}),s=r.constructor;if(n!==Y&&s!==n)if(s===Y){const i=new n;i._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=i}),i._start=r._start;for(let o=i._start;o!==null;o=o.right)o.parent=i;return i._length=r._length,this.share.set(t,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,$t)}getText(t=""){return this.get(t,xt)}getMap(t=""){return this.get(t,Lt)}getXmlFragment(t=""){return this.get(t,Mt)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){Gi(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new fe({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=t,F(t.parent.doc,r=>{const s=n.doc;t.deleted||r.subdocsAdded.add(s),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,n){super.on(t,n)}off(t,n){super.off(t,n)}}class mo{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return L(this.restDecoder)}readDsLen(){return L(this.restDecoder)}}class wo extends mo{readLeftID(){return N(L(this.restDecoder),L(this.restDecoder))}readRightID(){return N(L(this.restDecoder),L(this.restDecoder))}readClient(){return L(this.restDecoder)}readInfo(){return ye(this.restDecoder)}readString(){return Jt(this.restDecoder)}readParentInfo(){return L(this.restDecoder)===1}readTypeRef(){return L(this.restDecoder)}readLen(){return L(this.restDecoder)}readAny(){return Pe(this.restDecoder)}readBuf(){return xc(ot(this.restDecoder))}readJSON(){return JSON.parse(Jt(this.restDecoder))}readKey(){return Jt(this.restDecoder)}}class fa{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=L(this.restDecoder),this.dsCurrVal}readDsLen(){const t=L(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class be extends fa{constructor(t){super(t),this.keys=[],L(t),this.keyClockDecoder=new er(ot(t)),this.clientDecoder=new wn(ot(t)),this.leftClockDecoder=new er(ot(t)),this.rightClockDecoder=new er(ot(t)),this.infoDecoder=new Ls(ot(t),ye),this.stringDecoder=new $c(ot(t)),this.parentInfoDecoder=new Ls(ot(t),ye),this.typeRefDecoder=new wn(ot(t)),this.lenDecoder=new wn(ot(t))}readLeftID(){return new me(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new me(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Pe(this.restDecoder)}readBuf(){return ot(this.restDecoder)}readJSON(){return Pe(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class _o{constructor(){this.restEncoder=lt()}toUint8Array(){return K(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){E(this.restEncoder,t)}writeDsLen(t){E(this.restEncoder,t)}}class Qe extends _o{writeLeftID(t){E(this.restEncoder,t.client),E(this.restEncoder,t.clock)}writeRightID(t){E(this.restEncoder,t.client),E(this.restEncoder,t.clock)}writeClient(t){E(this.restEncoder,t)}writeInfo(t){Sr(this.restEncoder,t)}writeString(t){te(this.restEncoder,t)}writeParentInfo(t){E(this.restEncoder,t?1:0)}writeTypeRef(t){E(this.restEncoder,t)}writeLen(t){E(this.restEncoder,t)}writeAny(t){ze(this.restEncoder,t)}writeBuf(t){W(this.restEncoder,t)}writeJSON(t){te(this.restEncoder,JSON.stringify(t))}writeKey(t){te(this.restEncoder,t)}}class yo{constructor(){this.restEncoder=lt(),this.dsCurrVal=0}toUint8Array(){return K(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,E(this.restEncoder,n)}writeDsLen(t){t===0&&Rt(),E(this.restEncoder,t-1),this.dsCurrVal+=t}}class re extends yo{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new nr,this.clientEncoder=new _n,this.leftClockEncoder=new nr,this.rightClockEncoder=new nr,this.infoEncoder=new Us(Sr),this.stringEncoder=new Wc,this.parentInfoEncoder=new Us(Sr),this.typeRefEncoder=new _n,this.lenEncoder=new _n}toUint8Array(){const t=lt();return E(t,0),W(t,this.keyClockEncoder.toUint8Array()),W(t,this.clientEncoder.toUint8Array()),W(t,this.leftClockEncoder.toUint8Array()),W(t,this.rightClockEncoder.toUint8Array()),W(t,K(this.infoEncoder)),W(t,this.stringEncoder.toUint8Array()),W(t,K(this.parentInfoEncoder)),W(t,this.typeRefEncoder.toUint8Array()),W(t,this.lenEncoder.toUint8Array()),xn(t,K(this.restEncoder)),K(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){ze(this.restEncoder,t)}writeBuf(t){W(this.restEncoder,t)}writeJSON(t){ze(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const ha=(e,t,n,r)=>{r=ae(r,t[0].id.clock);const s=vt(t,r);E(e.restEncoder,t.length-s),e.writeClient(n),E(e.restEncoder,r);const i=t[s];i.write(e,r-i.id.clock);for(let o=s+1;o<t.length;o++)t[o].write(e,0)},Xr=(e,t,n)=>{const r=new Map;n.forEach((s,i)=>{rt(t,i)>s&&r.set(i,s)}),Vn(t).forEach((s,i)=>{n.has(i)||r.set(i,0)}),E(e.restEncoder,r.size),Array.from(r.entries()).sort((s,i)=>i[0]-s[0]).forEach(([s,i])=>{ha(e,t.clients.get(s),s,i)})},da=(e,t)=>{const n=It(),r=L(e.restDecoder);for(let s=0;s<r;s++){const i=L(e.restDecoder),o=new Array(i),l=e.readClient();let c=L(e.restDecoder);n.set(l,{i:0,refs:o});for(let a=0;a<i;a++){const u=e.readInfo();switch(Bn&u){case 0:{const f=e.readLen();o[a]=new ut(N(l,c),f),c+=f;break}case 10:{const f=L(e.restDecoder);o[a]=new mt(N(l,c),f),c+=f;break}default:{const f=(u&(Bt|ft))===0,d=new Q(N(l,c),null,(u&ft)===ft?e.readLeftID():null,null,(u&Bt)===Bt?e.readRightID():null,f?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,f&&(u&Ve)===Ve?e.readString():null,Jo(e,u));o[a]=d,c+=d.length}}}}return n},ga=(e,t,n)=>{const r=[];let s=Array.from(n.keys()).sort((h,g)=>h-g);if(s.length===0)return null;const i=()=>{if(s.length===0)return null;let h=n.get(s[s.length-1]);for(;h.refs.length===h.i;)if(s.pop(),s.length>0)h=n.get(s[s.length-1]);else return null;return h};let o=i();if(o===null&&r.length===0)return null;const l=new Eo,c=new Map,a=(h,g)=>{const p=c.get(h);(p==null||p>g)&&c.set(h,g)};let u=o.refs[o.i++];const f=new Map,d=()=>{for(const h of r){const g=h.id.client,p=n.get(g);p?(p.i--,l.clients.set(g,p.refs.slice(p.i)),n.delete(g),p.i=0,p.refs=[]):l.clients.set(g,[h]),s=s.filter(_=>_!==g)}r.length=0};for(;;){if(u.constructor!==mt){const g=Vt(f,u.id.client,()=>rt(t,u.id.client))-u.id.clock;if(g<0)r.push(u),a(u.id.client,u.id.clock-1),d();else{const p=u.getMissing(e,t);if(p!==null){r.push(u);const _=n.get(p)||{refs:[],i:0};if(_.refs.length===_.i)a(p,rt(t,p)),d();else{u=_.refs[_.i++];continue}}else(g===0||g<u.length)&&(u.integrate(e,g),f.set(u.id.client,u.id.clock+u.length))}}if(r.length>0)u=r.pop();else if(o!==null&&o.i<o.refs.length)u=o.refs[o.i++];else{if(o=i(),o===null)break;u=o.refs[o.i++]}}if(l.clients.size>0){const h=new re;return Xr(h,l,new Map),E(h.restEncoder,0),{missing:c,update:h.toUint8Array()}}return null},pa=(e,t)=>Xr(e,t.doc.store,t.beforeState),ma=(e,t,n,r=new be(e))=>F(t,s=>{s.local=!1;let i=!1;const o=s.doc,l=o.store,c=da(r,o),a=ga(s,l,c),u=l.pendingStructs;if(u){for(const[d,h]of u.missing)if(h<rt(l,d)){i=!0;break}if(a){for(const[d,h]of a.missing){const g=u.missing.get(d);(g==null||g>h)&&u.missing.set(d,h)}u.update=An([u.update,a.update])}}else l.pendingStructs=a;const f=xs(r,s,l);if(l.pendingDs){const d=new be(Gt(l.pendingDs));L(d.restDecoder);const h=xs(d,s,l);f&&h?l.pendingDs=An([f,h]):l.pendingDs=f||h}else l.pendingDs=f;if(i){const d=l.pendingStructs.update;l.pendingStructs=null,bo(s.doc,d)}},n,!1),bo=(e,t,n,r=be)=>{const s=Gt(t);ma(s,e,n,new r(s))},ko=(e,t,n)=>bo(e,t,n,wo),wa=(e,t,n=new Map)=>{Xr(e,t.store,n),Se(e,ua(t.store))},_a=(e,t=new Uint8Array([0]),n=new re)=>{const r=vo(t);wa(n,e,r);const s=[n.toUint8Array()];if(e.store.pendingDs&&s.push(e.store.pendingDs),e.store.pendingStructs&&s.push(Ua(e.store.pendingStructs.update,t)),s.length>1){if(n.constructor===Qe)return La(s.map((i,o)=>o===0?i:Ba(i)));if(n.constructor===re)return An(s)}return s[0]},Qr=(e,t)=>_a(e,t,new Qe),ya=e=>{const t=new Map,n=L(e.restDecoder);for(let r=0;r<n;r++){const s=L(e.restDecoder),i=L(e.restDecoder);t.set(s,i)}return t},vo=e=>ya(new mo(Gt(e))),So=(e,t)=>(E(e.restEncoder,t.size),Array.from(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{E(e.restEncoder,n),E(e.restEncoder,r)}),e),ba=(e,t)=>So(e,Vn(t.store)),ka=(e,t=new yo)=>(e instanceof Map?So(t,e):ba(t,e),t.toUint8Array()),va=e=>ka(e,new _o);class Sa{constructor(){this.l=[]}}const Fs=()=>new Sa,Vs=(e,t)=>e.l.push(t),Ps=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(s=>t!==s),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Do=(e,t,n)=>Br(e.l,[t,n]);class me{constructor(t,n){this.client=t,this.clock=n}}const an=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,N=(e,t)=>new me(e,t),Da=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Rt()};class Ea{constructor(t,n){this.ds=t,this.sv=n}}const Ca=(e,t)=>new Ea(e,t);Ca(go(),new Map);const Ee=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!ho(t.ds,e.id),yn=(e,t)=>{const n=Vt(e.meta,yn,xe),r=e.doc.store;n.has(t)||(t.sv.forEach((s,i)=>{s<rt(r,i)&&Yt(e,N(i,s))}),Er(e,t.ds,s=>{}),n.add(t))};class Eo{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Vn=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const s=n[n.length-1];t.set(r,s.id.clock+s.length)}),t},rt=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},Co=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw Rt()}n.push(t)},vt=(e,t)=>{let n=0,r=e.length-1,s=e[r],i=s.id.clock;if(i===t)return r;let o=jt(t/(i+s.length-1)*r);for(;n<=r;){if(s=e[o],i=s.id.clock,i<=t){if(t<i+s.length)return o;n=o+1}else r=o-1;o=jt((n+r)/2)}throw Rt()},Oa=(e,t)=>{const n=e.clients.get(t.client);return n[vt(n,t.clock)]},sr=Oa,Cr=(e,t,n)=>{const r=vt(t,n),s=t[r];return s.id.clock<n&&s instanceof Q?(t.splice(r+1,0,Rn(e,s,n-s.id.clock)),r+1):r},Yt=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Cr(e,n,t.clock)]},zs=(e,t,n)=>{const r=t.clients.get(n.client),s=vt(r,n.clock),i=r[s];return n.clock!==i.id.clock+i.length-1&&i.constructor!==ut&&r.splice(s+1,0,Rn(e,i,n.clock-i.id.clock+1)),i},Aa=(e,t,n)=>{const r=e.clients.get(t.id.client);r[vt(r,t.id.clock)]=n},Oo=(e,t,n,r,s)=>{if(r===0)return;const i=n+r;let o=Cr(e,t,n),l;do l=t[o++],i<l.id.clock+l.length&&Cr(e,t,i),s(l);while(o<t.length&&t[o].id.clock<i)};class Ia{constructor(t,n,r){this.doc=t,this.deleteSet=new Xe,this.beforeState=Vn(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set}}const Hs=(e,t)=>t.deleteSet.clients.size===0&&!Zl(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(Gr(t.deleteSet),pa(e,t),Se(e,t.deleteSet),!0),Ks=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&Vt(e.changed,t,xe).add(n)},bn=(e,t)=>{const n=e[t-1],r=e[t];n.deleted===r.deleted&&n.constructor===r.constructor&&n.mergeWith(r)&&(e.splice(t,1),r instanceof Q&&r.parentSub!==null&&r.parent._map.get(r.parentSub)===r&&r.parent._map.set(r.parentSub,n))},Ta=(e,t,n)=>{for(const[r,s]of e.clients.entries()){const i=t.clients.get(r);for(let o=s.length-1;o>=0;o--){const l=s[o],c=l.clock+l.len;for(let a=vt(i,l.clock),u=i[a];a<i.length&&u.id.clock<c;u=i[++a]){const f=i[a];if(l.clock+l.len<=f.id.clock)break;f instanceof Q&&f.deleted&&!f.keep&&n(f)&&f.gc(t,!1)}}}},$a=(e,t)=>{e.clients.forEach((n,r)=>{const s=t.clients.get(r);for(let i=n.length-1;i>=0;i--){const o=n[i],l=Nr(s.length-1,1+vt(s,o.clock+o.len-1));for(let c=l,a=s[c];c>0&&a.id.clock>=o.clock;a=s[--c])bn(s,c)}})},Ao=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,s=r.store,i=n.deleteSet,o=n._mergeStructs;try{Gr(i),n.afterState=Vn(n.doc.store),r._transaction=null,r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((c,a)=>l.push(()=>{(a._item===null||!a._item.deleted)&&a._callObserver(n,c)})),l.push(()=>{n.changedParentTypes.forEach((c,a)=>l.push(()=>{(a._item===null||!a._item.deleted)&&(c=c.filter(u=>u.target._item===null||!u.target._item.deleted),c.forEach(u=>{u.currentTarget=a}),c.sort((u,f)=>u.path.length-f.path.length),Do(a._dEH,c,n))})),l.push(()=>r.emit("afterTransaction",[n,r]))}),Br(l,[])}finally{r.gc&&Ta(i,s,r.gcFilter),$a(i,s),n.afterState.forEach((u,f)=>{const d=n.beforeState.get(f)||0;if(d!==u){const h=s.clients.get(f),g=ae(vt(h,d),1);for(let p=h.length-1;p>=g;p--)bn(h,p)}});for(let u=0;u<o.length;u++){const{client:f,clock:d}=o[u].id,h=s.clients.get(f),g=vt(h,d);g+1<h.length&&bn(h,g+1),g>0&&bn(h,g)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(ia(Yr,Hr,"[yjs] ",Kr,Jr,"Changed the client-id because another client seems to be using it."),r.clientID=po()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const u=new Qe;Hs(u,n)&&r.emit("update",[u.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const u=new re;Hs(u,n)&&r.emit("updateV2",[u.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:c,subdocsRemoved:a}=n;(l.size>0||a.size>0||c.size>0)&&(l.forEach(u=>{u.clientID=r.clientID,u.collectionid==null&&(u.collectionid=r.collectionid),r.subdocs.add(u)}),a.forEach(u=>r.subdocs.delete(u)),r.emit("subdocs",[{loaded:c,added:l,removed:a},r,n]),a.forEach(u=>u.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):Ao(e,t+1)}}},F=(e,t,n=null,r=!0)=>{const s=e._transactionCleanups;let i=!1;e._transaction===null&&(i=!0,e._transaction=new Ia(e,n,r),s.push(e._transaction),s.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{t(e._transaction)}finally{i&&s[0]===e._transaction&&Ao(s,0)}};function*Ra(e){const t=L(e.restDecoder);for(let n=0;n<t;n++){const r=L(e.restDecoder),s=e.readClient();let i=L(e.restDecoder);for(let o=0;o<r;o++){const l=e.readInfo();if(l===10){const c=L(e.restDecoder);yield new mt(N(s,i),c),i+=c}else if((Bn&l)!==0){const c=(l&(Bt|ft))===0,a=new Q(N(s,i),null,(l&ft)===ft?e.readLeftID():null,null,(l&Bt)===Bt?e.readRightID():null,c?e.readParentInfo()?e.readString():e.readLeftID():null,c&&(l&Ve)===Ve?e.readString():null,Jo(e,l));yield a,i+=a.length}else{const c=e.readLen();yield new ut(N(s,i),c),i+=c}}}}class Zr{constructor(t,n){this.gen=Ra(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===mt);return this.curr}}class ts{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const La=e=>An(e,wo,Qe),Ma=(e,t)=>{if(e.constructor===ut){const{client:n,clock:r}=e.id;return new ut(N(n,r+t),e.length-t)}else if(e.constructor===mt){const{client:n,clock:r}=e.id;return new mt(N(n,r+t),e.length-t)}else{const n=e,{client:r,clock:s}=n.id;return new Q(N(r,s+t),null,N(r,s+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},An=(e,t=be,n=re)=>{if(e.length===1)return e[0];const r=e.map(u=>new t(Gt(u)));let s=r.map(u=>new Zr(u,!0)),i=null;const o=new n,l=new ts(o);for(;s=s.filter(d=>d.curr!==null),s.sort((d,h)=>{if(d.curr.id.client===h.curr.id.client){const g=d.curr.id.clock-h.curr.id.clock;return g===0?d.curr.constructor===h.curr.constructor?0:d.curr.constructor===mt?1:-1:g}else return h.curr.id.client-d.curr.id.client}),s.length!==0;){const u=s[0],f=u.curr.id.client;if(i!==null){let d=u.curr,h=!1;for(;d!==null&&d.id.clock+d.length<=i.struct.id.clock+i.struct.length&&d.id.client>=i.struct.id.client;)d=u.next(),h=!0;if(d===null||d.id.client!==f||h&&d.id.clock>i.struct.id.clock+i.struct.length)continue;if(f!==i.struct.id.client)Ht(l,i.struct,i.offset),i={struct:d,offset:0},u.next();else if(i.struct.id.clock+i.struct.length<d.id.clock)if(i.struct.constructor===mt)i.struct.length=d.id.clock+d.length-i.struct.id.clock;else{Ht(l,i.struct,i.offset);const g=d.id.clock-i.struct.id.clock-i.struct.length;i={struct:new mt(N(f,i.struct.id.clock+i.struct.length),g),offset:0}}else{const g=i.struct.id.clock+i.struct.length-d.id.clock;g>0&&(i.struct.constructor===mt?i.struct.length-=g:d=Ma(d,g)),i.struct.mergeWith(d)||(Ht(l,i.struct,i.offset),i={struct:d,offset:0},u.next())}}else i={struct:u.curr,offset:0},u.next();for(let d=u.curr;d!==null&&d.id.client===f&&d.id.clock===i.struct.id.clock+i.struct.length&&d.constructor!==mt;d=u.next())Ht(l,i.struct,i.offset),i={struct:d,offset:0}}i!==null&&(Ht(l,i.struct,i.offset),i=null),es(l);const c=r.map(u=>qr(u)),a=aa(c);return Se(o,a),o.toUint8Array()},Ua=(e,t,n=be,r=re)=>{const s=vo(t),i=new r,o=new ts(i),l=new n(Gt(e)),c=new Zr(l,!1);for(;c.curr;){const u=c.curr,f=u.id.client,d=s.get(f)||0;if(c.curr.constructor===mt){c.next();continue}if(u.id.clock+u.length>d)for(Ht(o,u,ae(d-u.id.clock,0)),c.next();c.curr&&c.curr.id.client===f;)Ht(o,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===f&&c.curr.id.clock+c.curr.length<=d;)c.next()}es(o);const a=qr(l);return Se(i,a),i.toUint8Array()},Io=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:K(e.encoder.restEncoder)}),e.encoder.restEncoder=lt(),e.written=0)},Ht=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&Io(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),E(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},es=e=>{Io(e);const t=e.encoder.restEncoder;E(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];E(t,r.written),xn(t,r.restEncoder)}},Na=(e,t,n)=>{const r=new t(Gt(e)),s=new Zr(r,!1),i=new n,o=new ts(i);for(let c=s.curr;c!==null;c=s.next())Ht(o,c,0);es(o);const l=qr(r);return Se(i,l),i.toUint8Array()},Ba=e=>Na(e,be,Qe);class Pn{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null}get path(){return ja(this.currentTarget,this.target)}deletes(t){return ho(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(s=>{if(s!==null){const i=n._map.get(s);let o,l;if(this.adds(i)){let c=i.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(i))if(c!==null&&this.deletes(c))o="delete",l=Qn(c.content.getContent());else return;else c!==null&&this.deletes(c)?(o="update",l=Qn(c.content.getContent())):(o="add",l=void 0)}else if(this.deletes(i))o="delete",l=Qn(i.content.getContent());else return;t.set(s,{action:o,oldValue:l})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){const n=this.target,r=xe(),s=xe(),i=[];if(t={added:r,deleted:s,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const c=()=>{l&&i.push(l)};for(let a=n._start;a!==null;a=a.right)a.deleted?this.deletes(a)&&!this.adds(a)&&((l===null||l.delete===void 0)&&(c(),l={delete:0}),l.delete+=a.length,s.add(a)):this.adds(a)?((l===null||l.insert===void 0)&&(c(),l={insert:[]}),l.insert=l.insert.concat(a.content.getContent()),r.add(a)):((l===null||l.retain===void 0)&&(c(),l={retain:0}),l.retain+=a.length);l!==null&&l.retain===void 0&&c()}this._changes=t}return t}}const ja=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,s=t._item.parent._start;for(;s!==t._item&&s!==null;)s.deleted||r++,s=s.right;n.unshift(r)}t=t._item.parent}return n},To=80;let ns=0;class xa{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=ns++}}const Fa=e=>{e.timestamp=ns++},$o=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=ns++},Va=(e,t,n)=>{if(e.length>=To){const r=e.reduce((s,i)=>s.timestamp<i.timestamp?s:i);return $o(r,t,n),r}else{const r=new xa(t,n);return e.push(r),r}},zn=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((i,o)=>mn(t-i.index)<mn(t-o.index)?i:o);let r=e._start,s=0;for(n!==null&&(r=n.p,s=n.index,Fa(n));r.right!==null&&s<t;){if(!r.deleted&&r.countable){if(t<s+r.length)break;s+=r.length}r=r.right}for(;r.left!==null&&s>t;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);return n!==null&&mn(n.index-s)<r.parent.length/To?($o(n,r,s),n):Va(e._searchMarker,r,s)},He=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const s=e[r];if(n>0){let i=s.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(s.index-=i.length);if(i===null||i.marker===!0){e.splice(r,1);continue}s.p=i,i.marker=!0}(t<s.index||n>0&&t===s.index)&&(s.index=ae(t,s.index+n))}},Hn=(e,t,n)=>{const r=e,s=t.changedParentTypes;for(;Vt(s,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;Do(r._eH,n,t)};class Y{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Fs(),this._dEH=Fs(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw Tt()}clone(){throw Tt()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Vs(this._eH,t)}observeDeep(t){Vs(this._dEH,t)}unobserve(t){Ps(this._eH,t)}unobserveDeep(t){Ps(this._dEH,t)}toJSON(){}}const Ro=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const s=[];let i=e._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const o=i.content.getContent();if(o.length<=t)t-=o.length;else{for(let l=t;l<o.length&&r>0;l++)s.push(o[l]),r--;t=0}}i=i.right}return s},Lo=e=>{const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let s=0;s<r.length;s++)t.push(r[s])}n=n.right}return t},Ke=(e,t)=>{let n=0,r=e._start;for(;r!==null;){if(r.countable&&!r.deleted){const s=r.content.getContent();for(let i=0;i<s.length;i++)t(s[i],n++,e)}r=r.right}},Mo=(e,t)=>{const n=[];return Ke(e,(r,s)=>{n.push(t(r,s,e))}),n},Pa=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const s=n[r++];return n.length<=r&&(n=null),{done:!1,value:s}}}},Uo=(e,t)=>{const n=zn(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},In=(e,t,n,r)=>{let s=n;const i=e.doc,o=i.clientID,l=i.store,c=n===null?t._start:n.right;let a=[];const u=()=>{a.length>0&&(s=new Q(N(o,rt(l,o)),s,s&&s.lastId,c,c&&c.id,t,null,new ie(a)),s.integrate(e,0),a=[])};r.forEach(f=>{if(f===null)a.push(f);else switch(f.constructor){case Number:case Object:case Boolean:case Array:case String:a.push(f);break;default:switch(u(),f.constructor){case Uint8Array:case ArrayBuffer:s=new Q(N(o,rt(l,o)),s,s&&s.lastId,c,c&&c.id,t,null,new Ze(new Uint8Array(f))),s.integrate(e,0);break;case fe:s=new Q(N(o,rt(l,o)),s,s&&s.lastId,c,c&&c.id,t,null,new tn(f)),s.integrate(e,0);break;default:if(f instanceof Y)s=new Q(N(o,rt(l,o)),s,s&&s.lastId,c,c&&c.id,t,null,new zt(f)),s.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),u()},No=qe("Length exceeded!"),Bo=(e,t,n,r)=>{if(n>t._length)throw No;if(n===0)return t._searchMarker&&He(t._searchMarker,n,r.length),In(e,t,null,r);const s=n,i=zn(t,n);let o=t._start;for(i!==null&&(o=i.p,n-=i.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&Yt(e,N(o.id.client,o.id.clock+n));break}n-=o.length}return t._searchMarker&&He(t._searchMarker,s,r.length),In(e,t,o,r)},za=(e,t,n)=>{let s=(t._searchMarker||[]).reduce((i,o)=>o.index>i.index?o:i,{index:0,p:t._start}).p;if(s)for(;s.right;)s=s.right;return In(e,t,s,n)},jo=(e,t,n,r)=>{if(r===0)return;const s=n,i=r,o=zn(t,n);let l=t._start;for(o!==null&&(l=o.p,n-=o.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&Yt(e,N(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&Yt(e,N(l.id.client,l.id.clock+r)),l.delete(e),r-=l.length),l=l.right;if(r>0)throw No;t._searchMarker&&He(t._searchMarker,s,-i+r)},Tn=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},rs=(e,t,n,r)=>{const s=t._map.get(n)||null,i=e.doc,o=i.clientID;let l;if(r==null)l=new ie([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:l=new ie([r]);break;case Uint8Array:l=new Ze(r);break;case fe:l=new tn(r);break;default:if(r instanceof Y)l=new zt(r);else throw new Error("Unexpected content type")}new Q(N(o,rt(i.store,o)),s,s&&s.lastId,null,null,t,n,l).integrate(e,0)},ss=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},xo=e=>{const t={};return e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},Fo=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted},un=e=>la(e.entries(),t=>!t[1].deleted);class Ha extends Pn{constructor(t,n){super(t,n),this._transaction=n}}class $t extends Y{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new $t;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new $t}clone(){const t=new $t;return t.insert(0,this.toArray().map(n=>n instanceof Y?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,n){super._callObserver(t,n),Hn(this,t,new Ha(this,t))}insert(t,n){this.doc!==null?F(this.doc,r=>{Bo(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?F(this.doc,n=>{za(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?F(this.doc,r=>{jo(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return Uo(this,t)}toArray(){return Lo(this)}slice(t=0,n=this.length){return Ro(this,t,n)}toJSON(){return this.map(t=>t instanceof Y?t.toJSON():t)}map(t){return Mo(this,t)}forEach(t){Ke(this,t)}[Symbol.iterator](){return Pa(this)}_write(t){t.writeTypeRef(du)}}const Ka=e=>new $t;class Ja extends Pn{constructor(t,n,r){super(t,n),this.keysChanged=r}}class Lt extends Y{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,s)=>{this.set(s,r)}),this._prelimContent=null}_copy(){return new Lt}clone(){const t=new Lt;return this.forEach((n,r)=>{t.set(r,n instanceof Y?n.clone():n)}),t}_callObserver(t,n){Hn(this,t,new Ja(this,t,n))}toJSON(){const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const s=n.content.getContent()[n.length-1];t[r]=s instanceof Y?s.toJSON():s}}),t}get size(){return[...un(this._map)].length}keys(){return rr(un(this._map),t=>t[0])}values(){return rr(un(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return rr(un(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?F(this.doc,n=>{Tn(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?F(this.doc,r=>{rs(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return ss(this,t)}has(t){return Fo(this,t)}clear(){this.doc!==null?F(this.doc,t=>{this.forEach(function(n,r,s){Tn(t,s,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(gu)}}const Ya=e=>new Lt,Kt=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&pc(e,t);class Or{constructor(t,n,r,s){this.left=t,this.right=n,this.index=r,this.currentAttributes=s}forward(){switch(this.right===null&&Rt(),this.right.content.constructor){case tt:this.right.deleted||De(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Js=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case tt:t.right.deleted||De(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&Yt(e,N(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},fn=(e,t,n)=>{const r=new Map,s=zn(t,n);if(s){const i=new Or(s.p.left,s.p,s.index,r);return Js(e,i,n-s.index)}else{const i=new Or(null,t._start,0,r);return Js(e,i,n)}},Vo=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===tt&&Kt(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const s=e.doc,i=s.clientID;r.forEach((o,l)=>{const c=n.left,a=n.right,u=new Q(N(i,rt(s.store,i)),c,c&&c.lastId,a,a&&a.id,t,null,new tt(l,o));u.integrate(e,0),n.right=u,n.forward()})},De=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},Po=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===tt&&Kt(t[e.right.content.key]||null,e.right.content.value)))break;e.forward()}},zo=(e,t,n,r)=>{const s=e.doc,i=s.clientID,o=new Map;for(const l in r){const c=r[l],a=n.currentAttributes.get(l)||null;if(!Kt(a,c)){o.set(l,a);const{left:u,right:f}=n;n.right=new Q(N(i,rt(s.store,i)),u,u&&u.lastId,f,f&&f.id,t,null,new tt(l,c)),n.right.integrate(e,0),n.forward()}}return o},ir=(e,t,n,r,s)=>{n.currentAttributes.forEach((d,h)=>{s[h]===void 0&&(s[h]=null)});const i=e.doc,o=i.clientID;Po(n,s);const l=zo(e,t,n,s),c=r.constructor===String?new Ut(r):r instanceof Y?new zt(r):new he(r);let{left:a,right:u,index:f}=n;t._searchMarker&&He(t._searchMarker,n.index,c.getLength()),u=new Q(N(o,rt(i.store,o)),a,a&&a.lastId,u,u&&u.id,t,null,c),u.integrate(e,0),n.right=u,n.index=f,n.forward(),Vo(e,t,n,l)},Ys=(e,t,n,r,s)=>{const i=e.doc,o=i.clientID;Po(n,s);const l=zo(e,t,n,s);t:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===tt));){if(!n.right.deleted)switch(n.right.content.constructor){case tt:{const{key:c,value:a}=n.right.content,u=s[c];if(u!==void 0){if(Kt(u,a))l.delete(c);else{if(r===0)break t;l.set(c,a)}n.right.delete(e)}else n.currentAttributes.set(c,a);break}default:r<n.right.length&&Yt(e,N(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let c="";for(;r>0;r--)c+=`
`;n.right=new Q(N(o,rt(i.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Ut(c)),n.right.integrate(e,0),n.forward()}Vo(e,t,n,l)},Ho=(e,t,n,r,s)=>{let i=n;const o=En(s);for(;i&&(!i.countable||i.deleted);)!i.deleted&&i.content.constructor===tt&&De(o,i.content),i=i.right;let l=0,c=!1;for(;t!==i;){if(n===t&&(c=!0),!t.deleted){const a=t.content;switch(a.constructor){case tt:{const{key:u,value:f}=a;((o.get(u)||null)!==f||(r.get(u)||null)===f)&&(t.delete(e),l++,!c&&(s.get(u)||null)===f&&(r.get(u)||null)!==f&&s.delete(u));break}}}t=t.right}return l},Wa=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===tt){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},Ga=e=>{let t=0;return F(e.doc,n=>{let r=e._start,s=e._start,i=It();const o=En(i);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case tt:De(o,s.content);break;default:t+=Ho(n,r,s,i,o),i=En(o),r=s;break}s=s.right}}),t},Ws=(e,t,n)=>{const r=n,s=En(t.currentAttributes),i=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case zt:case he:case Ut:n<t.right.length&&Yt(e,N(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}i&&Ho(e,i,t.right,s,t.currentAttributes);const o=(t.left||t.right).parent;return o._searchMarker&&He(o._searchMarker,t.index,-r+n),t};class qa extends Pn{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];F(t,r=>{const s=new Map,i=new Map;let o=this.target._start,l=null;const c={};let a="",u=0,f=0;const d=()=>{if(l!==null){let h;switch(l){case"delete":h={delete:f},f=0;break;case"insert":h={insert:a},s.size>0&&(h.attributes={},s.forEach((g,p)=>{g!==null&&(h.attributes[p]=g)})),a="";break;case"retain":if(h={retain:u},Object.keys(c).length>0){h.attributes={};for(const g in c)h.attributes[g]=c[g]}u=0;break}n.push(h),l=null}};for(;o!==null;){switch(o.content.constructor){case zt:case he:this.adds(o)?this.deletes(o)||(d(),l="insert",a=o.content.getContent()[0],d()):this.deletes(o)?(l!=="delete"&&(d(),l="delete"),f+=1):o.deleted||(l!=="retain"&&(d(),l="retain"),u+=1);break;case Ut:this.adds(o)?this.deletes(o)||(l!=="insert"&&(d(),l="insert"),a+=o.content.str):this.deletes(o)?(l!=="delete"&&(d(),l="delete"),f+=o.length):o.deleted||(l!=="retain"&&(d(),l="retain"),u+=o.length);break;case tt:{const{key:h,value:g}=o.content;if(this.adds(o)){if(!this.deletes(o)){const p=s.get(h)||null;Kt(p,g)?g!==null&&o.delete(r):(l==="retain"&&d(),Kt(g,i.get(h)||null)?delete c[h]:c[h]=g)}}else if(this.deletes(o)){i.set(h,g);const p=s.get(h)||null;Kt(p,g)||(l==="retain"&&d(),c[h]=p)}else if(!o.deleted){i.set(h,g);const p=c[h];p!==void 0&&(Kt(p,g)?p!==null&&o.delete(r):(l==="retain"&&d(),g===null?delete c[h]:c[h]=g))}o.deleted||(l==="insert"&&d(),De(s,o.content));break}}o=o.right}for(d();n.length>0;){const h=n[n.length-1];if(h.retain!==void 0&&h.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class xt extends Y{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[]}get length(){return this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new xt}clone(){const t=new xt;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new qa(this,t,n),s=t.doc;if(Hn(this,t,r),!t.local){let i=!1;for(const[o,l]of t.afterState.entries()){const c=t.beforeState.get(o)||0;if(l!==c&&(Oo(t,s.store.clients.get(o),c,l,a=>{!a.deleted&&a.content.constructor===tt&&(i=!0)}),i))break}i||Er(t,t.deleteSet,o=>{o instanceof ut||i||o.parent===this&&o.content.constructor===tt&&(i=!0)}),F(s,o=>{i?Ga(this):Er(o,o.deleteSet,l=>{l instanceof ut||l.parent===this&&Wa(o,l)})})}}toString(){let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Ut&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?F(this.doc,r=>{const s=new Or(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const o=t[i];if(o.insert!==void 0){const l=!n&&typeof o.insert=="string"&&i===t.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&ir(r,this,s,l,o.attributes||{})}else o.retain!==void 0?Ys(r,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&Ws(r,s,o.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){const s=[],i=new Map,o=this.doc;let l="",c=this._start;function a(){if(l.length>0){const u={};let f=!1;i.forEach((h,g)=>{f=!0,u[g]=h});const d={insert:l};f&&(d.attributes=u),s.push(d),l=""}}return F(o,u=>{for(t&&yn(u,t),n&&yn(u,n);c!==null;){if(Ee(c,t)||n!==void 0&&Ee(c,n))switch(c.content.constructor){case Ut:{const f=i.get("ychange");t!==void 0&&!Ee(c,t)?(f===void 0||f.user!==c.id.client||f.type!=="removed")&&(a(),i.set("ychange",r?r("removed",c.id):{type:"removed"})):n!==void 0&&!Ee(c,n)?(f===void 0||f.user!==c.id.client||f.type!=="added")&&(a(),i.set("ychange",r?r("added",c.id):{type:"added"})):f!==void 0&&(a(),i.delete("ychange")),l+=c.content.str;break}case zt:case he:{a();const f={insert:c.content.getContent()[0]};if(i.size>0){const d={};f.attributes=d,i.forEach((h,g)=>{d[g]=h})}s.push(f);break}case tt:Ee(c,t)&&(a(),De(i,c.content));break}c=c.right}a()},yn),s}insert(t,n,r){if(n.length<=0)return;const s=this.doc;s!==null?F(s,i=>{const o=fn(i,this,t);r||(r={},o.currentAttributes.forEach((l,c)=>{r[c]=l})),ir(i,this,o,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r={}){const s=this.doc;s!==null?F(s,i=>{const o=fn(i,this,t);ir(i,this,o,n,r)}):this._pending.push(()=>this.insertEmbed(t,n,r))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?F(r,s=>{Ws(s,fn(s,this,t),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const s=this.doc;s!==null?F(s,i=>{const o=fn(i,this,t);o.right!==null&&Ys(i,this,o,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?F(this.doc,n=>{Tn(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?F(this.doc,r=>{rs(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return ss(this,t)}getAttributes(t){return xo(this)}_write(t){t.writeTypeRef(pu)}}const Xa=e=>new xt;class or{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===Wt||n.constructor===Mt)&&n._start!==null)t=n._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class Mt extends Y{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Mt}clone(){const t=new Mt;return t.insert(0,this.toArray().map(n=>n instanceof Y?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new or(this,t)}querySelector(t){t=t.toUpperCase();const r=new or(this,s=>s.nodeName&&s.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),Array.from(new or(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Hn(this,t,new tu(this,n,t))}toString(){return Mo(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const s=t.createDocumentFragment();return r!==void 0&&r._createAssociation(s,this),Ke(this,i=>{s.insertBefore(i.toDOM(t,n,r),null)}),s}insert(t,n){this.doc!==null?F(this.doc,r=>{Bo(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)F(this.doc,r=>{const s=t&&t instanceof Y?t._item:t;In(r,this,s,n)});else{const r=this._prelimContent,s=t===null?0:r.findIndex(i=>i===t)+1;if(s===0&&t!==null)throw qe("Reference item not found");r.splice(s,0,...n)}}delete(t,n=1){this.doc!==null?F(this.doc,r=>{jo(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return Lo(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return Uo(this,t)}slice(t=0,n=this.length){return Ro(this,t,n)}forEach(t){Ke(this,t)}_write(t){t.writeTypeRef(wu)}}const Qa=e=>new Mt;class Wt extends Mt{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,s)=>{this.setAttribute(s,r)}),this._prelimAttrs=null}_copy(){return new Wt(this.nodeName)}clone(){const t=new Wt(this.nodeName),n=this.getAttributes();for(const r in n)t.setAttribute(r,n[r]);return t.insert(0,this.toArray().map(r=>r instanceof Y?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const l in t)r.push(l);r.sort();const s=r.length;for(let l=0;l<s;l++){const c=r[l];n.push(c+'="'+t[c]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(t){this.doc!==null?F(this.doc,n=>{Tn(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?F(this.doc,r=>{rs(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return ss(this,t)}hasAttribute(t){return Fo(this,t)}getAttributes(t){return xo(this)}toDOM(t=document,n={},r){const s=t.createElement(this.nodeName),i=this.getAttributes();for(const o in i)s.setAttribute(o,i[o]);return Ke(this,o=>{s.appendChild(o.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(s,this),s}_write(t){t.writeTypeRef(mu),t.writeKey(this.nodeName)}}const Za=e=>new Wt(e.readKey());class tu extends Pn{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class ke extends Lt{constructor(t){super(),this.hookName=t}_copy(){return new ke(this.hookName)}clone(){const t=new ke(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const s=n[this.hookName];let i;return s!==void 0?i=s.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(_u),t.writeKey(this.hookName)}}const eu=e=>new ke(e.readKey());class se extends xt{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new se}clone(){const t=new se;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const s=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(s,this),s}toString(){return this.toDelta().map(t=>{const n=[];for(const s in t.attributes){const i=[];for(const o in t.attributes[s])i.push({key:o,value:t.attributes[s][o]});i.sort((o,l)=>o.key<l.key?-1:1),n.push({nodeName:s,attrs:i})}n.sort((s,i)=>s.nodeName<i.nodeName?-1:1);let r="";for(let s=0;s<n.length;s++){const i=n[s];r+=`<${i.nodeName}`;for(let o=0;o<i.attrs.length;o++){const l=i.attrs[o];r+=` ${l.key}="${l.value}"`}r+=">"}r+=t.insert;for(let s=n.length-1;s>=0;s--)r+=`</${n[s].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(yu)}}const nu=e=>new se;class is{constructor(t,n){this.id=t,this.length=n}get deleted(){throw Tt()}mergeWith(t){return!1}write(t,n,r){throw Tt()}integrate(t,n){throw Tt()}}const ru=0;class ut extends is{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),Co(t.doc.store,this)}write(t,n){t.writeInfo(ru),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Ze{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Ze(this.content)}splice(t){throw Tt()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const su=e=>new Ze(e.readBuf());class Je{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Je(this.len)}splice(t){const n=new Je(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){On(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const iu=e=>new Je(e.readLen()),Ko=(e,t)=>new fe({guid:e,...t,shouldLoad:t.shouldLoad||t.autoLoad||!1});class tn{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new tn(Ko(this.doc.guid,this.opts))}splice(t){throw Tt()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const ou=e=>new tn(Ko(e.readString(),e.readAny()));class he{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new he(this.embed)}splice(t){throw Tt()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const lu=e=>new he(e.readJSON());class tt{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new tt(this.key,this.value)}splice(t){throw Tt()}mergeWith(t){return!1}integrate(t,n){n.parent._searchMarker=null}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const cu=e=>new tt(e.readKey(),e.readJSON());class $n{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new $n(this.arr)}splice(t){const n=new $n(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];t.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const au=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const s=e.readString();s==="undefined"?n.push(void 0):n.push(JSON.parse(s))}return new $n(n)};class ie{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new ie(this.arr)}splice(t){const n=new ie(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];t.writeAny(i)}}getRef(){return 8}}const uu=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new ie(n)};class Ut{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ut(this.str)}splice(t){const n=new Ut(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"\uFFFD",n.str="\uFFFD"+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const fu=e=>new Ut(e.readString()),hu=[Ka,Ya,Xa,Za,Qa,eu,nu],du=0,gu=1,pu=2,mu=3,wu=4,_u=5,yu=6;class zt{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new zt(this.type._copy())}splice(t){throw Tt()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const bu=e=>new zt(hu[e.readTypeRef()](e)),Rn=(e,t,n)=>{const{client:r,clock:s}=t.id,i=new Q(N(r,s+n),t,N(r,s+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),t.redone!==null&&(i.redone=N(t.redone.client,t.redone.clock+n)),t.right=i,i.right!==null&&(i.right.left=i),e._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),t.length=n,i};class Q extends is{constructor(t,n,r,s,i,o,l,c){super(t,c.getLength()),this.origin=r,this.left=n,this.right=s,this.rightOrigin=i,this.parent=o,this.parentSub=l,this.redone=null,this.content=c,this.info=this.content.isCountable()?Rs:0}set marker(t){(this.info&tr)>0!==t&&(this.info^=tr)}get marker(){return(this.info&tr)>0}get keep(){return(this.info&$s)>0}set keep(t){this.keep!==t&&(this.info^=$s)}get countable(){return(this.info&Rs)>0}get deleted(){return(this.info&Zn)>0}set deleted(t){this.deleted!==t&&(this.info^=Zn)}markDeleted(){this.info|=Zn}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=rt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=rt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===me&&this.id.client!==this.parent.client&&this.parent.clock>=rt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=zs(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Yt(t,this.rightOrigin),this.rightOrigin=this.right.id),(this.left&&this.left.constructor===ut||this.right&&this.right.constructor===ut)&&(this.parent=null),!this.parent)this.left&&this.left.constructor===Q&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===Q&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===me){const r=sr(n,this.parent);r.constructor===ut?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=zs(t,t.doc.store,N(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,s;if(r!==null)s=r.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const i=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),i.add(s),an(this.origin,s.origin)){if(s.id.client<this.id.client)r=s,i.clear();else if(an(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(sr(t.doc.store,s.origin)))i.has(sr(t.doc.store,s.origin))||(r=s,i.clear());else break;s=s.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Co(t.doc.store,this),this.content.integrate(t,this),Ks(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new ut(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:N(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&an(t.origin,this.lastId)&&this.right===t&&an(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),On(t.deleteSet,this.id.client,this.id.clock,this.length),Ks(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw Rt();this.content.gc(t),n?Aa(t,this,new ut(this.id,this.length)):this.content=new Je(this.length)}write(t,n){const r=n>0?N(this.id.client,this.id.clock+n-1):this.origin,s=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&Bn|(r===null?0:ft)|(s===null?0:Bt)|(i===null?0:Ve);if(t.writeInfo(o),r!==null&&t.writeLeftID(r),s!==null&&t.writeRightID(s),r===null&&s===null){const l=this.parent;if(l._item!==void 0){const c=l._item;if(c===null){const a=Da(l);t.writeParentInfo(!0),t.writeString(a)}else t.writeParentInfo(!1),t.writeLeftID(c.id)}else l.constructor===String?(t.writeParentInfo(!0),t.writeString(l)):l.constructor===me?(t.writeParentInfo(!1),t.writeLeftID(l)):Rt();i!==null&&t.writeString(i)}this.content.write(t,n)}}const Jo=(e,t)=>ku[t&Bn](e),ku=[()=>{Rt()},iu,au,su,fu,lu,cu,bu,uu,ou,()=>{Rt()}],vu=10;class mt extends is{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){Rt()}write(t,n){t.writeInfo(vu),E(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const Yo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},Wo="__ $YJS$ __";Yo[Wo]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");Yo[Wo]=!0;var Ar,Ir,Su=function(t){return t()};function Du(e,t){if(Ir)return Ir(e,t);Su(e)}function oe(e,t,n){if(Ar)return Ar.apply(null,arguments);throw new Error("observable implementation not provided. Call enableReactiveBindings, enableVueBindings or enableMobxBindings.")}function Eu(e){Ar=function(n,r,s){var i=e.createAtom(n);return r&&r(),i},Ir=function(n,r){return e.reaction(n,r,{fireImmediately:!1})}}var Gs=new WeakSet;function Cu(e){if(Gs.has(e))return e;Gs.add(e);var t,n=new Map;function r(){if(!t){var f=function(h){(h.changes.added.size||h.changes.deleted.size||h.changes.keys.size||h.changes.delta.length)&&t.reportChanged()};t=oe("map",function(){e.observe(f)},function(){e.unobserve(f)})}t.reportObserved(e._implicitObserver)}function s(f){var d=n.get(f);if(!d){var h=function(p){d.reportChanged()};d=oe(f+"",function(){e.observe(h)},function(){e.unobserve(h)}),n.set(f,d)}d.reportObserved(e._implicitObserver)}var i=e.get;e.get=function(f){if(typeof f!="number")throw new Error("unexpected");s(f);var d=Reflect.apply(i,this,arguments);return d};function o(f){var d=e[f];e[f]=function(){r();var h=Reflect.apply(d,this,arguments);return h}}function l(f){var d=e,h=Object.getOwnPropertyDescriptor(d,f);if(h||(d=Object.getPrototypeOf(d),h=Object.getOwnPropertyDescriptor(d,f)),h||(d=Object.getPrototypeOf(d),h=Object.getOwnPropertyDescriptor(d,f)),!h)throw new Error("property not found");var g=h.get;h.get=function(){this._disableTracking||r();var p=Reflect.apply(g,this,arguments);return p},Object.defineProperty(e,f,h)}function c(f,d){var h=e,g=Object.getOwnPropertyDescriptor(h,f);if(g||(h=Object.getPrototypeOf(h),g=Object.getOwnPropertyDescriptor(h,f)),g||(h=Object.getPrototypeOf(h),g=Object.getOwnPropertyDescriptor(h,f)),!g)throw new Error("property not found");Object.defineProperty(e,d,g)}o("forEach"),o("toJSON"),o("toArray"),o("slice"),o("map"),c("length","lengthUntracked"),l("length");var a=e.push;e.push=function(f){this._disableTracking=!0;var d=a.call(this,f);return this._disableTracking=!1,d};var u=e.slice;return e.slice=function(f,d){this._disableTracking=!0;var h=u.call(this,f,d);return this._disableTracking=!1,h},e}var qs=new WeakSet;function Ou(e){if(qs.has(e))return e;qs.add(e);var t;function n(){if(!t){var i=Array.from(e.share.keys()),o=function(c){var a=Array.from(e.share.keys());JSON.stringify(i)!==JSON.stringify(a)&&(i=a,t.reportChanged())};t=oe("map",function(){e.on("beforeObserverCalls",o)},function(){e.off("beforeObserverCalls",o)})}t.reportObserved(e._implicitObserver)}var r=e.get;e.get=function(i){if(typeof i!="string")throw new Error("unexpected");var o=Reflect.apply(r,this,arguments);return Kn(o),o};function s(i){var o=e[i],l;e[i]=function(){var c,a=arguments;return n(),l&&l.removeObservers(),l=Du(function(){return c=Reflect.apply(o,e,a),c},function(){return t.reportChanged()}),c}}return s("toJSON"),Object.defineProperty(e,"keys",{get:function(){return n(),Object.keys(e.share)}}),e}var Xs=new WeakSet;function Au(e){if(Xs.has(e))return e;Xs.add(e);var t,n=new Map;function r(){if(!t){var l=function(a){(a.changes.added.size||a.changes.deleted.size||a.changes.keys.size||a.changes.delta.length)&&t.reportChanged()};t=oe("map",function(){e.observe(l)},function(){e.unobserve(l)})}t.reportObserved(e._implicitObserver)}function s(l){var c=n.get(l);if(!c){var a=function(f){f.keysChanged.has(l)&&(f.changes.added.size||f.changes.deleted.size||f.changes.keys.size||f.changes.delta.length)&&c.reportChanged()};c=oe(l,function(){e.observe(a)},function(){e.unobserve(a)}),n.set(l,c)}c.reportObserved(e._implicitObserver)}var i=e.get;e.get=function(l){if(typeof l!="string")throw new Error("unexpected");s(l);var c=Reflect.apply(i,this,arguments);return c};function o(l){var c=e[l];e[l]=function(){r();var a=Reflect.apply(c,this,arguments);return a}}return o("values"),o("entries"),o("keys"),o("forEach"),o("toJSON"),e}var Qs=new WeakSet;function Zs(e){if(Qs.has(e))return e;Qs.add(e);var t,n=function(i){t.reportChanged()};t=oe("text",function(){e.observe(n)},function(){e.unobserve(n)});function r(s){var i=e[s];e[s]=function(){t.reportObserved(this._implicitObserver);var o=Reflect.apply(i,this,arguments);return o}}return r("toString"),r("toJSON"),e}var ti=new WeakSet;function ei(e){if(ti.has(e))return e;ti.add(e);var t,n=function(o){(o.changes.added.size||o.changes.deleted.size||o.changes.keys.size||o.changes.delta.length)&&t.reportChanged()};t=oe("xml",function(){e.observe(n)},function(){e.unobserve(n)});function r(i){var o=e[i];e[i]=function(){t.reportObserved(this._implicitObserver);var l=Reflect.apply(o,this,arguments);return l}}function s(i){var o=e,l=Object.getOwnPropertyDescriptor(o,i);if(l||(o=Object.getPrototypeOf(o),l=Object.getOwnPropertyDescriptor(o,i)),l||(o=Object.getPrototypeOf(o),l=Object.getOwnPropertyDescriptor(o,i)),!l)throw new Error("property not found");var c=l.get;l.get=function(){t.reportObserved(this._implicitObserver);var a=Reflect.apply(c,this,arguments);return a},Object.defineProperty(e,i,l)}return r("toString"),r("toDOM"),r("toArray"),r("getAttribute"),s("firstChild"),e}function Kn(e){return e instanceof se||e instanceof xt?Zs(e):e instanceof $t?Cu(e):e instanceof Lt?Au(e):e instanceof fe||Object.prototype.hasOwnProperty.call(e,"autoLoad")?Ou(e):e instanceof Mt||e instanceof Wt?ei(e):e}function ni(e){e.share.forEach(function(t){t.constructor!==Y&&Kn(t)})}function ri(e,t){for(var n=e.length-1;n>=t;n--){var r=e[n];if(!r.deleted){var s;if(r instanceof ut)continue;(s=r.content)==null||s.getContent().forEach(function(i){i instanceof Y&&Kn(i)})}}}var si=new WeakSet;function Iu(e){si.has(e)||(si.add(e),Kn(e),e.store.clients.forEach(function(t){t&&ri(t,0)}),ni(e),e.on("beforeObserverCalls",function(t){ni(e),t.afterState.forEach(function(n,r){var s=t.beforeState.get(r)||0;if(s!==n){var i=t.doc.store.clients.get(r);if(!i)return;var o=vt(i,s);ri(i,o)}})}))}var Ye=function(t){this.value=void 0,this.value=t};function Tu(e){return ArrayBuffer.isView(e)?new Ye(e):new Ye(Object.freeze(e))}function $u(e){var t=function(){var o,l=(o=this[_t])==null?void 0:o.implicitObserver;e._implicitObserver=l;var c=e.slice.bind(e).apply(e,arguments);return c.map(function(a){var u=Jn(a,l);return u})},n=function(o){return o.map(function(l){var c=os(l),a=ve(c)||c;if(a instanceof Ye&&(a=a.value),a instanceof Y&&a.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return a})},r=function(){return[].findIndex.apply(t.apply(this),arguments)},s={slice:t,unshift:function(){return e.unshift(n([].slice.call(arguments))),e.lengthUntracked},push:function(){return e.push(n([].slice.call(arguments))),e.lengthUntracked},insert:e.insert.bind(e),toJSON:e.toJSON.bind(e),forEach:function(){return[].forEach.apply(t.apply(this),arguments)},every:function(){return[].every.apply(t.apply(this),arguments)},filter:function(){return[].filter.apply(t.apply(this),arguments)},find:function(){return[].find.apply(t.apply(this),arguments)},findIndex:r,some:function(){return[].some.apply(t.apply(this),arguments)},includes:function(){return[].includes.apply(t.apply(this),arguments)},map:function(){return[].map.apply(t.apply(this),arguments)},indexOf:function(){var o=arguments[0];return r.call(this,function(l){return Uu(l,o)})},splice:function(){var o=arguments[0]<0?e.length-Math.abs(arguments[0]):arguments[0],l=arguments[1],c=Array.from(Array.from(arguments).slice(2)),a=t.apply(this,[o,Number.isInteger(l)?o+l:void 0]);return e.doc?e.doc.transact(function(){e.delete(o,l),e.insert(o,n(c))}):(e.delete(o,l),e.insert(o,n(c))),a}};return Object.defineProperty(s,"length",{enumerable:!1,configurable:!1,writable:!0,value:e.lengthUntracked}),s}function Ce(e){if(typeof e=="string"&&e.trim().length){var t=Number(e);if(Number.isInteger(t))return t}return e}function ii(e,t){if(t===void 0&&(t=new $t),t[Z])throw new Error("unexpected");var n=$u(t),r=new Proxy(n,{set:function(i,o,l){var c=Ce(o);throw typeof c!="number"?new Error:new Error("array assignment is not implemented / supported")},get:function(i,o,l){var c=Ce(o);if(c===Yn)return t;if(typeof c=="number"){var a;if(l&&l[_t]){var u;a=(u=l[_t])==null?void 0:u.implicitObserver,t._implicitObserver=a}var f=t.get(c);return f=Jn(f,a),f}if(c===Symbol.toStringTag)return"Array";if(c===Symbol.iterator){var d=t.slice();return Reflect.get(d,c)}if(c==="length")return t.length;var h=Reflect.get(i,c,l);return h},deleteProperty:function(i,o){var l=Ce(o);if(typeof l!="number")throw new Error;return l<t.lengthUntracked&&l>=0?(t.delete(l),!0):!1},has:function(i,o){var l=Ce(o);return typeof l!="number"?Reflect.has(i,l):l<t.lengthUntracked&&l>=0},getOwnPropertyDescriptor:function(i,o){var l=Ce(o);if(l==="length")return{enumerable:!1,configurable:!1,writable:!0};if(typeof l=="number"&&l>=0&&l<t.lengthUntracked)return{enumerable:!0,configurable:!0,writable:!0}},ownKeys:function(i){for(var o=[],l=0;l<t.length;l++)o.push(l+"");return o.push("length"),o}});return n.push.apply(r,e),r}function oi(e,t){if(t===void 0&&(t=new Lt),t[Z])throw new Error("unexpected");var n=new Proxy({},{set:function(i,o,l){if(typeof o!="string")throw new Error;var c=os(l),a=ve(c)||c;if(a instanceof Ye&&(a=a.value),a instanceof Y&&a.parent)throw new Error("Not supported: reassigning object that already occurs in the tree.");return t.set(o,a),!0},get:function(i,o,l){if(o===Yn)return t;if(typeof o!="string")return Reflect.get(i,o);var c;if(l&&l[_t]){var a;c=(a=l[_t])==null?void 0:a.implicitObserver,t._implicitObserver=c}var u=t.get(o);return u=Jn(u,c),u},deleteProperty:function(i,o){if(typeof o!="string")throw new Error;return t.has(o)?(t.delete(o),!0):!1},has:function(i,o){return!!(typeof o=="string"&&t.has(o))},getOwnPropertyDescriptor:function(i,o){if(typeof o=="string"&&t.has(o))return{enumerable:!0,configurable:!0}},ownKeys:function(i){return Array.from(t.keys())}});Le.set(t,n);for(var r in e)n[r]=e[r];return n}function Ru(e){return e instanceof Y}var Le=new WeakMap;function Jn(e,t){if(Ru(e)){if(e._implicitObserver=t,e instanceof $t||e instanceof Lt){if(!Le.has(e)){var n=os(e);Le.set(e,n)}e=Le.get(e)}else if(e instanceof Wt||e instanceof Mt||e instanceof se||e instanceof ke||e instanceof xt)Ur(e),e.__v_skip=!0;else throw new Error("unknown YType");return e}else{if(e===null)return null;if(typeof e=="object")return Tu(e)}return e}function os(e){if(e==null)return e;if(e=ve(e)||e,e instanceof $t)return ii([],e);if(e instanceof Lt)return oi({},e);if(typeof e=="string")return e;if(Array.isArray(e))return ii(e);if(e instanceof Wt||e instanceof Mt||e instanceof se||e instanceof ke)return e;if(e instanceof xt)return e;if(typeof e=="object")return e instanceof Ye?e:oi(e);if(typeof e=="number"||typeof e=="boolean")return e;throw new Error("invalid")}function Lu(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=n[t],s=r[1];if(Array.isArray(s)){if(s.length!==0)throw new Error("Root Array initializer must always be empty array")}else if(s&&typeof s=="object"){if(Object.keys(s).length!==0||Object.getPrototypeOf(s)!==Object.prototype)throw new Error("Root Object initializer must always be {}")}else if(s!=="xml"&&s!=="text")throw new Error("unknown Root initializer")}}function li(e,t,n){var r=t[n];if(!r){n!=="__v_raw"&&n!=="__v_isRef"&&n!=="__v_isReadonly"&&console.warn("property not found on root doc",n);return}return r==="xml"?e.getXmlFragment(n):r==="text"?e.getText(n):Array.isArray(r)?e.getArray(n):e.getMap(n)}function Mu(e,t){if(e[Z])throw new Error("unexpected");Lu(t);var n=new Proxy({},{set:function(s,i,o){throw typeof i!="string"?new Error:new Error("cannot set new elements on root doc")},get:function(s,i,o){if(i===Yn)return e;if(typeof i!="string")return Reflect.get(s,i);var l;if(o&&o[_t]){var c;l=(c=o[_t])==null?void 0:c.implicitObserver,e._implicitObserver=l}if(i==="toJSON"){for(var a=0,u=Object.keys(t);a<u.length;a++){var f=u[a];li(e,t,f)}var d=Reflect.get(e,i);return d}var h=li(e,t,i);return h=Jn(h,l),h},deleteProperty:function(s,i){throw new Error("deleteProperty not available for doc")},has:function(s,i){return!!(typeof i=="string"&&e.share.has(i))},getOwnPropertyDescriptor:function(s,i){if(typeof i=="string"&&e.share.has(i)||i==="toJSON")return{enumerable:!0,configurable:!0}},ownKeys:function(s){return Array.from(e.share.keys())}});return Le.set(e,n),n}Eu(Xl);var Yn=Symbol("INTERNAL_SYMBOL");function ve(e){if(!(typeof e!="object"||e===null)){var t=e[Yn];return t&&(Ur(t),t.__v_skip=!0),t}}function Uu(e,t){if(e===t)return!0;if(typeof e=="object"&&typeof t=="object"){var n=ve(e),r=ve(t);return!n||!r?!1:n===r}return!1}function Nu(e,t){return t===void 0&&(t=new fe),Iu(t),Mu(t,e)}function Bu(e){var t,n=new Lr(function(){t&&t(r)}),r=je(e,n),s=Ui(r,function(i){return t=i,function(){t=void 0}});return{subscribe:s.subscribe,set:function(){}}}const ju=new Map;class xu{constructor(t){this.room=t,this.onmessage=null,fc(n=>n.key===t&&this.onmessage!==null&&this.onmessage({data:jc(n.newValue||"")}))}postMessage(t){Zi.setItem(this.room,Bc(Rc(t)))}}const Fu=typeof BroadcastChannel>"u"?xu:BroadcastChannel,ls=e=>Vt(ju,e,()=>{const t=new Set,n=new Fu(e);return n.onmessage=r=>t.forEach(s=>s(r.data,"broadcastchannel")),{bc:n,subs:t}}),Vu=(e,t)=>ls(e).subs.add(t),Pu=(e,t)=>ls(e).subs.delete(t),pe=(e,t,n=null)=>{const r=ls(e);r.bc.postMessage(t),r.subs.forEach(s=>s(t,n))},Go=0,cs=1,qo=2,Tr=(e,t)=>{E(e,Go);const n=va(t);W(e,n)},Xo=(e,t,n)=>{E(e,cs),W(e,Qr(t,n))},zu=(e,t,n)=>Xo(t,n,ot(e)),Qo=(e,t,n)=>{try{ko(t,ot(e),n)}catch(r){console.error("Caught error while handling a Yjs update",r)}},Hu=(e,t)=>{E(e,qo),W(e,t)},Ku=Qo,Ju=(e,t,n,r)=>{const s=L(e);switch(s){case Go:zu(e,t,n);break;case cs:Qo(e,n,r);break;case qo:Ku(e,n,r);break;default:throw new Error("Unknown message type")}return s},Yu=0,Wu=(e,t,n)=>{switch(L(e)){case Yu:n(t,Jt(e))}},lr=3e4;class Gu extends Nn{constructor(t){super(),this.doc=t,this.clientID=t.clientID,this.states=new Map,this.meta=new Map,this._checkInterval=setInterval(()=>{const n=ne();this.getLocalState()!==null&&lr/2<=n-this.meta.get(this.clientID).lastUpdated&&this.setLocalState(this.getLocalState());const r=[];this.meta.forEach((s,i)=>{i!==this.clientID&&lr<=n-s.lastUpdated&&this.states.has(i)&&r.push(i)}),r.length>0&&as(this,r,"timeout")},jt(lr/10)),t.on("destroy",()=>{this.destroy()}),this.setLocalState({})}destroy(){this.emit("destroy",[this]),this.setLocalState(null),super.destroy(),clearInterval(this._checkInterval)}getLocalState(){return this.states.get(this.clientID)||null}setLocalState(t){const n=this.clientID,r=this.meta.get(n),s=r===void 0?0:r.clock+1,i=this.states.get(n);t===null?this.states.delete(n):this.states.set(n,t),this.meta.set(n,{clock:s,lastUpdated:ne()});const o=[],l=[],c=[],a=[];t===null?a.push(n):i==null?t!=null&&o.push(n):(l.push(n),Re(i,t)||c.push(n)),(o.length>0||c.length>0||a.length>0)&&this.emit("change",[{added:o,updated:c,removed:a},"local"]),this.emit("update",[{added:o,updated:l,removed:a},"local"])}setLocalStateField(t,n){const r=this.getLocalState();r!==null&&this.setLocalState({...r,[t]:n})}getStates(){return this.states}}const as=(e,t,n)=>{const r=[];for(let s=0;s<t.length;s++){const i=t[s];if(e.states.has(i)){if(e.states.delete(i),i===e.clientID){const o=e.meta.get(i);e.meta.set(i,{clock:o.clock+1,lastUpdated:ne()})}r.push(i)}}r.length>0&&(e.emit("change",[{added:[],updated:[],removed:r},n]),e.emit("update",[{added:[],updated:[],removed:r},n]))},Me=(e,t,n=e.states)=>{const r=t.length,s=lt();E(s,r);for(let i=0;i<r;i++){const o=t[i],l=n.get(o)||null,c=e.meta.get(o).clock;E(s,o),E(s,c),te(s,JSON.stringify(l))}return K(s)},qu=(e,t,n)=>{const r=Gt(t),s=ne(),i=[],o=[],l=[],c=[],a=L(r);for(let u=0;u<a;u++){const f=L(r);let d=L(r);const h=JSON.parse(Jt(r)),g=e.meta.get(f),p=e.states.get(f),_=g===void 0?0:g.clock;(_<d||_===d&&h===null&&e.states.has(f))&&(h===null?f===e.clientID&&e.getLocalState()!=null?d++:e.states.delete(f):e.states.set(f,h),e.meta.set(f,{clock:d,lastUpdated:s}),g===void 0&&h!==null?i.push(f):g!==void 0&&h===null?c.push(f):h!==null&&(Re(h,p)||l.push(f),o.push(f)))}(i.length>0||l.length>0||c.length>0)&&e.emit("change",[{added:i,updated:l,removed:c},n]),(i.length>0||o.length>0||c.length>0)&&e.emit("update",[{added:i,updated:o,removed:c},n])},Xu=e=>dc(e,(t,n)=>`${encodeURIComponent(n)}=${encodeURIComponent(t)}`).join("&"),Xt=0,Zo=3,we=1,Qu=2,en=[];en[Xt]=(e,t,n,r,s)=>{E(e,Xt);const i=Ju(t,e,n.doc,n);r&&i===cs&&!n.synced&&(n.synced=!0)};en[Zo]=(e,t,n,r,s)=>{E(e,we),W(e,Me(n.awareness,Array.from(n.awareness.getStates().keys())))};en[we]=(e,t,n,r,s)=>{qu(n.awareness,ot(t),n)};en[Qu]=(e,t,n,r,s)=>{Wu(t,n.doc,(i,o)=>Zu(n,o))};const ci=3e4,Zu=(e,t)=>console.warn(`Permission denied to access ${e.url}.
${t}`),tl=(e,t,n)=>{const r=Gt(t),s=lt(),i=L(r),o=e.messageHandlers[i];return o?o(s,r,e,n,i):console.error("Unable to compute message"),s},el=e=>{if(e.shouldConnect&&e.ws===null){const t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=n=>{e.wsLastMessageReceived=ne();const r=tl(e,new Uint8Array(n.data),!0);Vr(r)>1&&t.send(K(r))},t.onerror=n=>{e.emit("connection-error",[n,e])},t.onclose=n=>{e.emit("connection-close",[n,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,as(e.awareness,Array.from(e.awareness.getStates().keys()).filter(r=>r!==e.doc.clientID),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,setTimeout(el,Nr(ec(2,e.wsUnsuccessfulReconnects)*100,e.maxBackoffTime),e)},t.onopen=()=>{e.wsLastMessageReceived=ne(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);const n=lt();if(E(n,Xt),Tr(n,e.doc),t.send(K(n)),e.awareness.getLocalState()!==null){const r=lt();E(r,we),W(r,Me(e.awareness,[e.doc.clientID])),t.send(K(r))}},e.emit("status",[{status:"connecting"}])}},cr=(e,t)=>{e.wsconnected&&e.ws.send(t),e.bcconnected&&pe(e.bcChannel,t,e)};class tf extends Nn{constructor(t,n,r,{connect:s=!0,awareness:i=new Gu(r),params:o={},WebSocketPolyfill:l=WebSocket,resyncInterval:c=-1,maxBackoffTime:a=2500,disableBc:u=!1}={}){for(super();t[t.length-1]==="/";)t=t.slice(0,t.length-1);const f=Xu(o);this.maxBackoffTime=a,this.bcChannel=t+"/"+n,this.url=t+"/"+n+(f.length===0?"":"?"+f),this.roomname=n,this.doc=r,this._WS=l,this.awareness=i,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=u,this.wsUnsuccessfulReconnects=0,this.messageHandlers=en.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=s,this._resyncInterval=0,c>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){const d=lt();E(d,Xt),Tr(d,r),this.ws.send(K(d))}},c)),this._bcSubscriber=(d,h)=>{if(h!==this){const g=tl(this,new Uint8Array(d),!1);Vr(g)>1&&pe(this.bcChannel,K(g),this)}},this._updateHandler=(d,h)=>{if(h!==this){const g=lt();E(g,Xt),Hu(g,d),cr(this,K(g))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=({added:d,updated:h,removed:g},p)=>{const _=d.concat(h).concat(g),v=lt();E(v,we),W(v,Me(i,_)),cr(this,K(v))},this._unloadHandler=()=>{as(this.awareness,[r.clientID],"window unload")},typeof window<"u"?window.addEventListener("unload",this._unloadHandler):typeof process<"u"&&process.on("exit",this._unloadHandler),i.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&ci<ne()-this.wsLastMessageReceived&&this.ws.close()},ci/10),s&&this.connect()}get synced(){return this._synced}set synced(t){this._synced!==t&&(this._synced=t,this.emit("synced",[t]),this.emit("sync",[t]))}destroy(){this._resyncInterval!==0&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),typeof window<"u"?window.removeEventListener("unload",this._unloadHandler):typeof process<"u"&&process.off("exit",this._unloadHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(Vu(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);const t=lt();E(t,Xt),Tr(t,this.doc),pe(this.bcChannel,K(t),this);const n=lt();E(n,Xt),Xo(n,this.doc),pe(this.bcChannel,K(n),this);const r=lt();E(r,Zo),pe(this.bcChannel,K(r),this);const s=lt();E(s,we),W(s,Me(this.awareness,[this.doc.clientID])),pe(this.bcChannel,K(s),this)}disconnectBc(){const t=lt();E(t,we),W(t,Me(this.awareness,[this.doc.clientID],new Map)),cr(this,K(t)),this.bcconnected&&(Pu(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),this.ws!==null&&this.ws.close()}connect(){this.shouldConnect=!0,!this.wsconnected&&this.ws===null&&(el(this),this.connectBc())}}const de=e=>Fn((t,n)=>{e.onerror=r=>n(new Error(r.target.error)),e.onblocked=()=>location.reload(),e.onsuccess=r=>t(r.target.result)}),ef=(e,t)=>Fn((n,r)=>{const s=indexedDB.open(e);s.onupgradeneeded=i=>t(i.target.result),s.onerror=i=>r(qe(i.target.error)),s.onblocked=()=>location.reload(),s.onsuccess=i=>{const o=i.target.result;o.onversionchange=()=>{o.close()},typeof addEventListener<"u"&&addEventListener("unload",()=>o.close()),n(o)}}),nf=e=>de(indexedDB.deleteDatabase(e)),rf=(e,t)=>t.forEach(n=>e.createObjectStore.apply(e,n)),Ie=(e,t,n="readwrite")=>{const r=e.transaction(t,n);return t.map(s=>hf(r,s))},nl=(e,t)=>de(e.count(t)),sf=(e,t)=>de(e.get(t)),rl=(e,t)=>de(e.delete(t)),of=(e,t,n)=>de(e.put(t,n)),$r=(e,t)=>de(e.add(t)),lf=(e,t)=>de(e.getAll(t)),cf=(e,t,n)=>{let r=null;return ff(e,t,s=>(r=s,!1),n).then(()=>r)},af=(e,t=null)=>cf(e,t,"prev"),uf=(e,t)=>Fn((n,r)=>{e.onerror=r,e.onsuccess=s=>{const i=s.target.result;if(i===null||t(i)===!1)return n();i.continue()}}),ff=(e,t,n,r="next")=>uf(e.openKeyCursor(t,r),s=>n(s.key)),hf=(e,t)=>e.objectStore(t),df=(e,t)=>IDBKeyRange.upperBound(e,t),gf=(e,t)=>IDBKeyRange.lowerBound(e,t),pf=()=>{let e=!0;return(t,n)=>{if(e){e=!1;try{t()}finally{e=!0}}else n!==void 0&&n()}},ar="custom",sl="updates",il=500,ol=e=>{const[t]=Ie(e.db,[sl]);return lf(t,gf(e._dbref,!1)).then(n=>F(e.doc,()=>{n.forEach(r=>ko(e.doc,r))},e,!1)).then(()=>af(t).then(n=>{e._dbref=n+1})).then(()=>nl(t).then(n=>{e._dbsize=n})).then(()=>t)},mf=(e,t=!0)=>ol(e).then(n=>{(t||e._dbsize>=il)&&$r(n,Qr(e.doc)).then(()=>rl(n,df(e._dbref,!0))).then(()=>nl(n).then(r=>{e._dbsize=r}))});class wf extends Nn{constructor(t,n){super(),this.doc=n,this.name=t,this._mux=pf(),this._dbref=0,this._dbsize=0,this._destroyed=!1,this.db=null,this.synced=!1,this._db=ef(t,r=>rf(r,[["updates",{autoIncrement:!0}],["custom"]])),this.whenSynced=this._db.then(r=>{this.db=r;const s=Qr(n);return ol(this).then(i=>$r(i,s)).then(()=>this._destroyed?this:(this.emit("synced",[this]),this.synced=!0,this))}),this._storeTimeout=1e3,this._storeTimeoutId=null,this._storeUpdate=(r,s)=>{if(this.db&&s!==this){const[i]=Ie(this.db,[sl]);$r(i,r),++this._dbsize>=il&&(this._storeTimeoutId!==null&&clearTimeout(this._storeTimeoutId),this._storeTimeoutId=setTimeout(()=>{mf(this,!1),this._storeTimeoutId=null},this._storeTimeout))}},n.on("update",this._storeUpdate),this.destroy=this.destroy.bind(this),n.on("destroy",this.destroy)}destroy(){return this._storeTimeoutId&&clearTimeout(this._storeTimeoutId),this.doc.off("update",this._storeUpdate),this.doc.off("destroy",this.destroy),this._destroyed=!0,this._db.then(t=>{t.close()})}clearData(){return this.destroy().then(()=>{nf(this.name)})}get(t){return this._db.then(n=>{const[r]=Ie(n,[ar],"readonly");return sf(r,t)})}set(t,n){return this._db.then(r=>{const[s]=Ie(r,[ar]);return of(s,n,t)})}del(t){return this._db.then(n=>{const[r]=Ie(n,[ar]);return rl(r,t)})}}const ll=Nu({users:{},tasks:{},misc:{}}),Ft=Bu(ll),cl=ve(ll);new tf("ws://localhost:3000","room",cl);new wf("doc",cl);function _f(e){let t,n,r,s;return{c(){t=y("div"),n=y("div"),w(n,"style",r=`background: ${e[1]}; width: ${e[2]}%; height: 100%;`),w(t,"class","progress-bar svelte-y9pl9d"),w(t,"style",s=`height: ${e[0]};`)},m(i,o){O(i,t,o),m(t,n)},p(i,[o]){o&6&&r!==(r=`background: ${i[1]}; width: ${i[2]}%; height: 100%;`)&&w(n,"style",r),o&1&&s!==(s=`height: ${i[0]};`)&&w(t,"style",s)},i:x,o:x,d(i){i&&C(t)}}}function yf(e,t,n){let{height:r="16px"}=t,{color:s="#5DBB63"}=t,{progress:i=0}=t;return e.$$set=o=>{"height"in o&&n(0,r=o.height),"color"in o&&n(1,s=o.color),"progress"in o&&n(2,i=o.progress)},[r,s,i]}class al extends pt{constructor(t){super(),gt(this,t,yf,_f,at,{height:0,color:1,progress:2})}}class kt{static getAllWork(t,n){const r=[];return Object.entries(t).forEach(([s,i])=>{i.work.forEach(o=>{o.uid===n&&r.push(o)})}),r}static getWorkForTask(t,n,r){const s=[];return Object.entries(t).forEach(([i,o])=>{i===r&&o.work.forEach(l=>{l.uid===n&&s.push(l)})}),s}static workDoneToday(t,n){return this.getAllWork(t,n).filter(r=>this.isToday(r.start))}static timeDoneToday(t,n,r){const s=this.workDoneToday(t,n);let i=0;return s.forEach(o=>{o.end?i+=o.end-o.start:i+=r-o.start}),i}static timePerTaskOnDay(t,n,r,s){const i={};return Object.entries(t).forEach(([o,l])=>{let c=0;l.work.forEach(a=>{a.uid===n&&(!this.isSameDay(s.getTime(),a.start)||(a.end?c+=a.end-a.start:c+=r-a.start))}),c!==0&&(i[o]=c)}),i}static isWorking(t,n){return this.workDoneToday(t,n).some(r=>!r.end)}static currentTask(t,n){let r="";return Object.entries(t).forEach(([s,i])=>{i.work.forEach(o=>{o.uid===n&&(!this.isToday(o.start)||o.end||(r=s))})}),r}static isToday(t){const n=new Date,r=new Date(t);return r.getDate()==n.getDate()&&r.getMonth()==n.getMonth()&&r.getFullYear()==n.getFullYear()}static isSameDay(t,n){const r=new Date(t),s=new Date(n);return s.getDate()==r.getDate()&&s.getMonth()==r.getMonth()&&s.getFullYear()==r.getFullYear()}}let hn;const bf=new Uint8Array(16);function kf(){if(!hn&&(hn=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hn))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hn(bf)}const st=[];for(let e=0;e<256;++e)st.push((e+256).toString(16).slice(1));function vf(e,t=0){return(st[e[t+0]]+st[e[t+1]]+st[e[t+2]]+st[e[t+3]]+"-"+st[e[t+4]]+st[e[t+5]]+"-"+st[e[t+6]]+st[e[t+7]]+"-"+st[e[t+8]]+st[e[t+9]]+"-"+st[e[t+10]]+st[e[t+11]]+st[e[t+12]]+st[e[t+13]]+st[e[t+14]]+st[e[t+15]]).toLowerCase()}const Sf=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),ai={randomUUID:Sf};function Df(e,t,n){if(ai.randomUUID&&!t&&!e)return ai.randomUUID();e=e||{};const r=e.random||(e.rng||kf)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){n=n||0;for(let s=0;s<16;++s)t[n+s]=r[s];return t}return vf(r)}class Ef{constructor(){ps(this,"_uid")}get uid(){if(this._uid)return this._uid;const t=localStorage.getItem("uid");if(!t){const n=Df();return localStorage.setItem("uid",n),this._uid=t,n}return this._uid=t,t}}const ct=new Ef;function ui(e,t,n){const r=e.slice();return r[15]=t[n][0],r[16]=t[n][1],r}function Cf(e){let t;return{c(){t=y("span"),t.textContent="You must select a task before you can start.",B(t,"color","lightcoral")},m(n,r){O(n,t,r)},p:x,d(n){n&&C(t)}}}function Of(e){var c;let t,n,r,s=((c=e[1].tasks[e[3]])==null?void 0:c.name)+"",i,o,l;return{c(){t=y("span"),t.textContent="(",n=R(),r=y("span"),i=j(s),o=R(),l=y("span"),l.textContent=")",B(r,"color","lightcoral")},m(a,u){O(a,t,u),O(a,n,u),O(a,r,u),m(r,i),O(a,o,u),O(a,l,u)},p(a,u){var f;u&10&&s!==(s=((f=a[1].tasks[a[3]])==null?void 0:f.name)+"")&&X(i,s)},d(a){a&&C(t),a&&C(n),a&&C(r),a&&C(o),a&&C(l)}}}function Af(e){let t;return{c(){t=y("div")},m(n,r){O(n,t,r)},p:x,d(n){n&&C(t)}}}function If(e){let t,n,r,s=e[4],i=[];for(let o=0;o<s.length;o+=1)i[o]=fi(ui(e,s,o));return{c(){t=y("select");for(let o=0;o<i.length;o+=1)i[o].c();w(t,"id","options"),w(t,"class","svelte-1n2n2q2"),e[3]===void 0&&Ne(()=>e[10].call(t))},m(o,l){O(o,t,l);for(let c=0;c<i.length;c+=1)i[c].m(t,null);Sn(t,e[3]),n||(r=[it(t,"change",e[10]),it(t,"change",e[11])],n=!0)},p(o,l){if(l&16){s=o[4];let c;for(c=0;c<s.length;c+=1){const a=ui(o,s,c);i[c]?i[c].p(a,l):(i[c]=fi(a),i[c].c(),i[c].m(t,null))}for(;c<i.length;c+=1)i[c].d(1);i.length=s.length}l&24&&Sn(t,o[3])},d(o){o&&C(t),_e(i,o),n=!1,yt(r)}}}function fi(e){let t,n=e[16].name+"",r,s;return{c(){t=y("option"),r=j(n),t.__value=s=e[15],t.value=t.__value},m(i,o){O(i,t,o),m(t,r)},p(i,o){o&16&&n!==(n=i[16].name+"")&&X(r,n),o&16&&s!==(s=i[15])&&(t.__value=s,t.value=t.__value)},d(i){i&&C(t)}}}function Tf(e){var ds;let t,n,r,s,i,o,l,c=((ds=e[1].users[ct.uid])==null?void 0:ds.name)+"",a,u,f,d,h,g,p,_=Math.floor(e[5])+"",v,A,k=Math.floor(e[5]%1*60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+"",b,$,U,S,et,q,V,St,T,J=e[0]==="paused"?"START":"PAUSE",M,Dt,Wn,us;function fs(G,bt){return G[1].tasks[G[3]]?Of:Cf}let nn=fs(e),Et=nn(e);function hs(G,bt){return G[2]?If:Af}let rn=hs(e),Ct=rn(e);return{c(){t=y("div"),n=y("div"),r=y("span"),r.textContent="Stopwatch",s=R(),i=y("span"),i.textContent="(",o=R(),l=y("span"),a=j(c),u=R(),f=y("span"),f.textContent=")",d=R(),h=y("div"),g=y("div"),p=y("div"),v=j(_),A=j(":"),b=j(k),$=R(),U=y("div"),Et.c(),S=R(),Ct.c(),et=R(),q=y("div"),V=y("button"),V.textContent="SELECT",St=R(),T=y("button"),M=j(J),B(l,"color","lightcoral"),w(n,"id","title"),w(n,"class","svelte-1n2n2q2"),w(U,"id","label"),w(U,"class","svelte-1n2n2q2"),w(g,"id","time"),w(g,"class","svelte-1n2n2q2"),w(V,"class","btn svelte-1n2n2q2"),B(V,"background","#D0312D"),w(T,"class","btn svelte-1n2n2q2"),w(T,"style",Dt=`background: ${e[3].trim()!==""?"#3CB043":"lightgray"};`),w(q,"id","btns"),w(q,"class","svelte-1n2n2q2"),w(h,"id","content"),w(h,"class","svelte-1n2n2q2"),w(t,"id","stopwatch"),w(t,"class","svelte-1n2n2q2")},m(G,bt){O(G,t,bt),m(t,n),m(n,r),m(n,s),m(n,i),m(n,o),m(n,l),m(l,a),m(n,u),m(n,f),m(t,d),m(t,h),m(h,g),m(g,p),m(p,v),m(p,A),m(p,b),m(g,$),m(g,U),Et.m(U,null),m(h,S),Ct.m(h,null),m(h,et),m(h,q),m(q,V),m(q,St),m(q,T),m(T,M),Wn||(us=[it(V,"click",e[6]),it(T,"click",e[7])],Wn=!0)},p(G,[bt]){var gs;bt&2&&c!==(c=((gs=G[1].users[ct.uid])==null?void 0:gs.name)+"")&&X(a,c),bt&32&&_!==(_=Math.floor(G[5])+"")&&X(v,_),bt&32&&k!==(k=Math.floor(G[5]%1*60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+"")&&X(b,k),nn===(nn=fs(G))&&Et?Et.p(G,bt):(Et.d(1),Et=nn(G),Et&&(Et.c(),Et.m(U,null))),rn===(rn=hs(G))&&Ct?Ct.p(G,bt):(Ct.d(1),Ct=rn(G),Ct&&(Ct.c(),Ct.m(h,et))),bt&1&&J!==(J=G[0]==="paused"?"START":"PAUSE")&&X(M,J),bt&24&&Dt!==(Dt=`background: ${G[3].trim()!==""?"#3CB043":"lightgray"};`)&&w(T,"style",Dt)},i:x,o:x,d(G){G&&C(t),Et.d(),Ct.d(),Wn=!1,yt(us)}}}function $f(e,t,n){let r,s,i;wt(e,Ft,A=>n(1,i=A));let o="paused",l=!1,c="",a=0,u=null;const f=setInterval(()=>n(8,a=new Date().getTime()),38);function d(){o==="paused"&&n(2,l=!l)}function h(){!i.tasks[c]||(o==="paused"?g():p())}function g(){n(0,o="running"),i.tasks[c].work.push({uid:ct.uid,start:new Date().getTime()})}function p(){n(0,o="paused"),n(3,c=""),n(2,l=!0),n(9,u.end=new Date().getTime(),u)}Mn(()=>clearInterval(f));function _(){c=Li(this),n(3,c),n(1,i),n(4,s),n(1,i)}const v=()=>n(2,l=!1);return e.$$.update=()=>{e.$$.dirty&2&&(n(9,u=null),Object.entries(i.tasks).forEach(([A,k])=>{k.work.forEach(b=>{!b.end&&b.uid===ct.uid&&(n(9,u=b),n(3,c=A))})})),e.$$.dirty&512&&u&&n(0,o="running"),e.$$.dirty&1&&o==="running"&&n(2,l=!1),e.$$.dirty&258&&n(5,r=kt.timeDoneToday(i.tasks,ct.uid,a)/1e3/60),e.$$.dirty&2&&n(4,s=Object.entries(i.tasks).sort((A,k)=>A[1].name.localeCompare(k[1].name)))},[o,i,l,c,s,r,d,h,a,u,_,v]}class Rf extends pt{constructor(t){super(),gt(this,t,$f,Tf,at,{})}}function Lf(e){let t,n,r;return{c(){t=y("span"),n=j(e[0]),w(t,"class","material-icons"),w(t,"style",r=`width: ${e[1]}; height: ${e[1]}; font-size: ${e[1]};`)},m(s,i){O(s,t,i),m(t,n)},p(s,[i]){i&1&&X(n,s[0]),i&2&&r!==(r=`width: ${s[1]}; height: ${s[1]}; font-size: ${s[1]};`)&&w(t,"style",r)},i:x,o:x,d(s){s&&C(t)}}}function Mf(e,t,n){let{icon:r}=t,{size:s="24px"}=t;return e.$$set=i=>{"icon"in i&&n(0,r=i.icon),"size"in i&&n(1,s=i.size)},[r,s]}class le extends pt{constructor(t){super(),gt(this,t,Mf,Lf,at,{icon:0,size:1})}}function hi(e,t,n){const r=e.slice();return r[3]=t[n][0],r[4]=t[n][1],r}function di(e){let t,n,r;return{c(){t=y("button"),t.textContent="ANGEL"},m(s,i){O(s,t,i),n||(r=it(t,"click",jf),n=!0)},p:x,d(s){s&&C(t),n=!1,r()}}}function gi(e){let t,n,r=e[4].name+"",s,i,o,l,c,a,u,f=Math.floor(kt.timeDoneToday(e[1].tasks,e[3],e[0])/1e3/60)+"",d,h,g=Math.floor(kt.timeDoneToday(e[1].tasks,e[3],e[0])/1e3/60%1*60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+"",p,_,v,A,k;const b=[Nf,Uf],$=[];function U(S,et){return et&2&&(o=null),o==null&&(o=!!kt.isWorking(S[1].tasks,S[3])),o?0:1}return l=U(e,-1),c=$[l]=b[l](e),v=new al({props:{progress:kt.timeDoneToday(e[1].tasks,e[3],e[0])/1e3/60/e[1].misc.minTime*100,color:e[4].color}}),{c(){t=y("div"),n=y("div"),s=j(r),i=R(),c.c(),a=R(),u=y("div"),d=j(f),h=j(":"),p=j(g),_=R(),H(v.$$.fragment),A=R(),w(t,"class","user-progress svelte-cs59y0")},m(S,et){O(S,t,et),m(t,n),m(n,s),m(t,i),$[l].m(t,null),m(t,a),m(t,u),m(u,d),m(u,h),m(u,p),m(t,_),P(v,t,null),m(t,A),k=!0},p(S,et){(!k||et&2)&&r!==(r=S[4].name+"")&&X(s,r);let q=l;l=U(S,et),l!==q&&(ht(),I($[q],1,1,()=>{$[q]=null}),dt(),c=$[l],c||(c=$[l]=b[l](S),c.c()),D(c,1),c.m(t,a)),(!k||et&3)&&f!==(f=Math.floor(kt.timeDoneToday(S[1].tasks,S[3],S[0])/1e3/60)+"")&&X(d,f),(!k||et&3)&&g!==(g=Math.floor(kt.timeDoneToday(S[1].tasks,S[3],S[0])/1e3/60%1*60).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+"")&&X(p,g);const V={};et&3&&(V.progress=kt.timeDoneToday(S[1].tasks,S[3],S[0])/1e3/60/S[1].misc.minTime*100),et&2&&(V.color=S[4].color),v.$set(V)},i(S){k||(D(c),D(v.$$.fragment,S),k=!0)},o(S){I(c),I(v.$$.fragment,S),k=!1},d(S){S&&C(t),$[l].d(),z(v)}}}function Uf(e){let t;return{c(){t=y("div")},m(n,r){O(n,t,r)},i:x,o:x,d(n){n&&C(t)}}}function Nf(e){let t,n;return t=new le({props:{icon:"schedule"}}),{c(){H(t.$$.fragment)},m(r,s){P(t,r,s),n=!0},i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){z(t,r)}}}function pi(e){let t,n,r=(e[4].name==="Angel"&&e[3]==="604b1901-954c-4b74-a7a4-206f61638d6f"||e[4].name!=="Angel")&&gi(e);return{c(){r&&r.c(),t=ce()},m(s,i){r&&r.m(s,i),O(s,t,i),n=!0},p(s,i){s[4].name==="Angel"&&s[3]==="604b1901-954c-4b74-a7a4-206f61638d6f"||s[4].name!=="Angel"?r?(r.p(s,i),i&2&&D(r,1)):(r=gi(s),r.c(),D(r,1),r.m(t.parentNode,t)):r&&(ht(),I(r,1,1,()=>{r=null}),dt())},i(s){n||(D(r),n=!0)},o(s){I(r),n=!1},d(s){r&&r.d(s),s&&C(t)}}}function Bf(e){let t,n,r,s,i,o,l,c,a=e[1].users[ct.uid]===void 0&&di(),u=Object.entries(e[1].users),f=[];for(let h=0;h<u.length;h+=1)f[h]=pi(hi(e,u,h));const d=h=>I(f[h],1,1,()=>{f[h]=null});return l=new Rf({}),{c(){t=y("div"),a&&a.c(),n=R(),r=y("div"),s=y("div"),s.textContent="Progress",i=R();for(let h=0;h<f.length;h+=1)f[h].c();o=R(),H(l.$$.fragment),w(s,"id","progress-title"),w(s,"class","svelte-cs59y0"),w(r,"id","progress"),w(r,"class","svelte-cs59y0"),w(t,"id","content"),w(t,"class","svelte-cs59y0")},m(h,g){O(h,t,g),a&&a.m(t,null),m(t,n),m(t,r),m(r,s),m(r,i);for(let p=0;p<f.length;p+=1)f[p].m(r,null);m(t,o),P(l,t,null),c=!0},p(h,[g]){if(h[1].users[ct.uid]===void 0?a?a.p(h,g):(a=di(),a.c(),a.m(t,n)):a&&(a.d(1),a=null),g&3){u=Object.entries(h[1].users);let p;for(p=0;p<u.length;p+=1){const _=hi(h,u,p);f[p]?(f[p].p(_,g),D(f[p],1)):(f[p]=pi(_),f[p].c(),D(f[p],1),f[p].m(r,null))}for(ht(),p=u.length;p<f.length;p+=1)d(p);dt()}},i(h){if(!c){for(let g=0;g<u.length;g+=1)D(f[g]);D(l.$$.fragment,h),c=!0}},o(h){f=f.filter(Boolean);for(let g=0;g<f.length;g+=1)I(f[g]);I(l.$$.fragment,h),c=!1},d(h){h&&C(t),a&&a.d(),_e(f,h),z(l)}}}function jf(){localStorage.setItem("uid","604b1901-954c-4b74-a7a4-206f61638d6f"),window.document.location.reload()}function xf(e,t,n){let r;wt(e,Ft,o=>n(1,r=o));let s=0;const i=setInterval(()=>n(0,s=new Date().getTime()),38);return Mn(()=>clearInterval(i)),[s,r]}class Ff extends pt{constructor(t){super(),gt(this,t,xf,Bf,at,{})}}function mi(e,t,n){const r=e.slice();return r[1]=t[n][0],r[2]=t[n][1],r}function wi(e){let t,n,r,s=e[2].name+"",i,o,l,c,a,u,f,d=Math.round(10/e[2].estimate*100)+"",h,g,p,_,v,A,k;return c=new le({props:{icon:"edit"}}),v=new al({props:{progress:Math.round(10/e[2].estimate*100)}}),{c(){t=y("div"),n=y("div"),r=y("span"),i=j(s),o=R(),l=y("button"),H(c.$$.fragment),a=R(),u=y("div"),f=y("span"),h=j(d),g=j("%"),p=R(),_=y("span"),H(v.$$.fragment),A=R(),w(r,"class","title svelte-ct9ujb"),w(l,"class","edit-btn svelte-ct9ujb"),w(n,"class","task-row svelte-ct9ujb"),w(f,"class","percentage svelte-ct9ujb"),B(_,"width","328px"),w(u,"class","task-row svelte-ct9ujb"),w(t,"class","task svelte-ct9ujb")},m(b,$){O(b,t,$),m(t,n),m(n,r),m(r,i),m(n,o),m(n,l),P(c,l,null),m(t,a),m(t,u),m(u,f),m(f,h),m(f,g),m(u,p),m(u,_),P(v,_,null),m(t,A),k=!0},p(b,$){(!k||$&1)&&s!==(s=b[2].name+"")&&X(i,s),(!k||$&1)&&d!==(d=Math.round(10/b[2].estimate*100)+"")&&X(h,d);const U={};$&1&&(U.progress=Math.round(10/b[2].estimate*100)),v.$set(U)},i(b){k||(D(c.$$.fragment,b),D(v.$$.fragment,b),k=!0)},o(b){I(c.$$.fragment,b),I(v.$$.fragment,b),k=!1},d(b){b&&C(t),z(c),z(v)}}}function Vf(e){let t,n,r=Object.entries(e[0].tasks),s=[];for(let o=0;o<r.length;o+=1)s[o]=wi(mi(e,r,o));const i=o=>I(s[o],1,1,()=>{s[o]=null});return{c(){t=y("div");for(let o=0;o<s.length;o+=1)s[o].c();w(t,"id","tasks"),w(t,"class","svelte-ct9ujb")},m(o,l){O(o,t,l);for(let c=0;c<s.length;c+=1)s[c].m(t,null);n=!0},p(o,[l]){if(l&1){r=Object.entries(o[0].tasks);let c;for(c=0;c<r.length;c+=1){const a=mi(o,r,c);s[c]?(s[c].p(a,l),D(s[c],1)):(s[c]=wi(a),s[c].c(),D(s[c],1),s[c].m(t,null))}for(ht(),c=r.length;c<s.length;c+=1)i(c);dt()}},i(o){if(!n){for(let l=0;l<r.length;l+=1)D(s[l]);n=!0}},o(o){s=s.filter(Boolean);for(let l=0;l<s.length;l+=1)I(s[l]);n=!1},d(o){o&&C(t),_e(s,o)}}}function Pf(e,t,n){let r;return wt(e,Ft,s=>n(0,r=s)),[r]}class zf extends pt{constructor(t){super(),gt(this,t,Pf,Vf,at,{})}}function _i(e,t,n){const r=e.slice();return r[18]=t[n][0],r[19]=t[n][1],r}function yi(e,t,n){const r=e.slice();return r[22]=t[n][0],r[23]=t[n][1],r}function bi(e,t,n){const r=e.slice();return r[26]=t[n][0],r[9]=t[n][1],r}function ki(e){let t,n=e[23].name+"",r,s,i,o,l=Object.entries(kt.timePerTaskOnDay(e[1].tasks,e[22],e[2],new Date(`${e[7]}/${e[6]}/${e[8]}`))),c=[];for(let u=0;u<l.length;u+=1)c[u]=vi(bi(e,l,u));const a=u=>I(c[u],1,1,()=>{c[u]=null});return{c(){t=y("div"),r=j(n),s=R();for(let u=0;u<c.length;u+=1)c[u].c();i=ce()},m(u,f){O(u,t,f),m(t,r),O(u,s,f);for(let d=0;d<c.length;d+=1)c[d].m(u,f);O(u,i,f),o=!0},p(u,f){if((!o||f&2)&&n!==(n=u[23].name+"")&&X(r,n),f&454){l=Object.entries(kt.timePerTaskOnDay(u[1].tasks,u[22],u[2],new Date(`${u[7]}/${u[6]}/${u[8]}`)));let d;for(d=0;d<l.length;d+=1){const h=bi(u,l,d);c[d]?(c[d].p(h,f),D(c[d],1)):(c[d]=vi(h),c[d].c(),D(c[d],1),c[d].m(i.parentNode,i))}for(ht(),d=l.length;d<c.length;d+=1)a(d);dt()}},i(u){if(!o){for(let f=0;f<l.length;f+=1)D(c[f]);o=!0}},o(u){c=c.filter(Boolean);for(let f=0;f<c.length;f+=1)I(c[f]);o=!1},d(u){u&&C(t),u&&C(s),_e(c,u),u&&C(i)}}}function Hf(e){let t;return{c(){t=y("div")},m(n,r){O(n,t,r)},i:x,o:x,d(n){n&&C(t)}}}function Kf(e){let t,n;return t=new le({props:{icon:"schedule"}}),{c(){H(t.$$.fragment)},m(r,s){P(t,r,s),n=!0},i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){z(t,r)}}}function vi(e){let t,n,r,s,i,o,l=e[1].tasks[e[26]].name+"",c,a,u=Math.round(e[9]/1e3/60*100)/100+"",f,d,h,g;const p=[Kf,Hf],_=[];function v(A,k){return k&454&&(n=null),n==null&&(n=kt.currentTask(A[1].tasks,A[22])===A[26]),n?0:1}return r=v(e,-1),s=_[r]=p[r](e),{c(){t=y("div"),s.c(),i=R(),o=y("div"),c=j(l),a=j(" : "),f=j(u),d=j(" minutes"),h=R(),w(t,"class","user-task svelte-15loo2k"),B(t,"margin-left","20px"),B(t,"font-weight","500")},m(A,k){O(A,t,k),_[r].m(t,null),m(t,i),m(t,o),m(o,c),m(o,a),m(o,f),m(o,d),m(t,h),g=!0},p(A,k){let b=r;r=v(A,k),r!==b&&(ht(),I(_[b],1,1,()=>{_[b]=null}),dt(),s=_[r],s||(s=_[r]=p[r](A),s.c()),D(s,1),s.m(t,i)),(!g||k&454)&&l!==(l=A[1].tasks[A[26]].name+"")&&X(c,l),(!g||k&454)&&u!==(u=Math.round(A[9]/1e3/60*100)/100+"")&&X(f,u)},i(A){g||(D(s),g=!0)},o(A){I(s),g=!1},d(A){A&&C(t),_[r].d()}}}function Si(e){let t,n,r=(e[23].name==="Angel"&&e[22]==="604b1901-954c-4b74-a7a4-206f61638d6f"||e[23].name!=="Angel")&&ki(e);return{c(){r&&r.c(),t=ce()},m(s,i){r&&r.m(s,i),O(s,t,i),n=!0},p(s,i){s[23].name==="Angel"&&s[22]==="604b1901-954c-4b74-a7a4-206f61638d6f"||s[23].name!=="Angel"?r?(r.p(s,i),i&2&&D(r,1)):(r=ki(s),r.c(),D(r,1),r.m(t.parentNode,t)):r&&(ht(),I(r,1,1,()=>{r=null}),dt())},i(s){n||(D(r),n=!0)},o(s){I(r),n=!1},d(s){r&&r.d(s),s&&C(t)}}}function Di(e){let t,n=e[19].name+"",r,s;return{c(){t=y("option"),r=j(n),t.__value=s=e[18],t.value=t.__value},m(i,o){O(i,t,o),m(t,r)},p(i,o){o&32&&n!==(n=i[19].name+"")&&X(r,n),o&32&&s!==(s=i[18])&&(t.__value=s,t.value=t.__value)},d(i){i&&C(t)}}}function Jf(e){let t,n,r,s,i,o,l,c,a,u,f;return{c(){t=y("div"),n=y("span"),n.textContent="Select date",r=R(),s=y("input"),i=R(),o=y("div"),l=y("input"),c=R(),a=y("button"),a.textContent="UPDATE",w(s,"type","date"),w(l,"type","number")},m(d,h){O(d,t,h),m(t,n),m(t,r),m(t,s),At(s,e[0]),O(d,i,h),O(d,o,h),m(o,l),At(l,e[3]),m(o,c),m(o,a),u||(f=[it(s,"input",e[14]),it(l,"input",e[15]),it(a,"click",e[16])],u=!0)},p(d,h){h&1&&At(s,d[0]),h&8&&vn(l.value)!==d[3]&&At(l,d[3])},d(d){d&&C(t),d&&C(i),d&&C(o),u=!1,yt(f)}}}function Yf(e){let t,n,r,s,i,o,l,c,a,u,f,d,h,g,p,_,v,A,k,b,$,U=Object.entries(e[1].users),S=[];for(let T=0;T<U.length;T+=1)S[T]=Si(yi(e,U,T));const et=T=>I(S[T],1,1,()=>{S[T]=null});let q=e[5],V=[];for(let T=0;T<q.length;T+=1)V[T]=Di(_i(e,q,T));g=new le({props:{icon:"add"}}),v=new le({props:{icon:"remove"}});let St=ct.uid==="a0610e79-fdde-4dab-be0a-d7fac7fb40d7"&&Jf(e);return{c(){t=y("div"),n=y("div"),r=y("div"),r.textContent="Totals",s=R(),i=y("div");for(let T=0;T<S.length;T+=1)S[T].c();o=R(),l=y("div"),c=y("div"),a=y("input"),u=R(),f=y("select");for(let T=0;T<V.length;T+=1)V[T].c();d=R(),h=y("button"),H(g.$$.fragment),p=R(),_=y("button"),H(v.$$.fragment),A=R(),St&&St.c(),w(r,"id","title"),w(r,"class","svelte-15loo2k"),w(i,"id","user-totals"),w(i,"class","svelte-15loo2k"),w(n,"id","totals"),w(n,"class","svelte-15loo2k"),w(a,"type","number"),B(a,"width","25%"),B(a,"text-align","center"),B(a,"font-size","32px"),B(f,"width","45%"),B(f,"text-align","center"),e[4]===void 0&&Ne(()=>e[13].call(f)),B(h,"width","15%"),B(h,"background","lightgreen"),B(h,"display","grid"),B(h,"justify-content","center"),B(h,"align-items","center"),B(_,"width","15%"),B(_,"background","lightcoral"),B(_,"display","grid"),B(_,"justify-content","center"),B(_,"align-items","center"),B(c,"display","flex"),B(c,"width","100%"),B(c,"height","50px"),B(c,"justify-content","center"),B(c,"gap","10px"),B(l,"display","grid"),B(l,"gap","10px"),B(l,"margin-top","10px"),w(t,"id","content"),w(t,"class","svelte-15loo2k")},m(T,J){O(T,t,J),m(t,n),m(n,r),m(n,s),m(n,i);for(let M=0;M<S.length;M+=1)S[M].m(i,null);m(t,o),m(t,l),m(l,c),m(c,a),At(a,e[9]),m(c,u),m(c,f);for(let M=0;M<V.length;M+=1)V[M].m(f,null);Sn(f,e[4]),m(c,d),m(c,h),P(g,h,null),m(c,p),m(c,_),P(v,_,null),m(l,A),St&&St.m(l,null),k=!0,b||($=[it(a,"input",e[12]),it(f,"change",e[13]),it(h,"click",e[10]),it(_,"click",e[11])],b=!0)},p(T,[J]){if(J&454){U=Object.entries(T[1].users);let M;for(M=0;M<U.length;M+=1){const Dt=yi(T,U,M);S[M]?(S[M].p(Dt,J),D(S[M],1)):(S[M]=Si(Dt),S[M].c(),D(S[M],1),S[M].m(i,null))}for(ht(),M=U.length;M<S.length;M+=1)et(M);dt()}if(J&512&&vn(a.value)!==T[9]&&At(a,T[9]),J&32){q=T[5];let M;for(M=0;M<q.length;M+=1){const Dt=_i(T,q,M);V[M]?V[M].p(Dt,J):(V[M]=Di(Dt),V[M].c(),V[M].m(f,null))}for(;M<V.length;M+=1)V[M].d(1);V.length=q.length}J&48&&Sn(f,T[4]),ct.uid==="a0610e79-fdde-4dab-be0a-d7fac7fb40d7"&&St.p(T,J)},i(T){if(!k){for(let J=0;J<U.length;J+=1)D(S[J]);D(g.$$.fragment,T),D(v.$$.fragment,T),k=!0}},o(T){S=S.filter(Boolean);for(let J=0;J<S.length;J+=1)I(S[J]);I(g.$$.fragment,T),I(v.$$.fragment,T),k=!1},d(T){T&&C(t),_e(S,T),_e(V,T),z(g),z(v),St&&St.d(),b=!1,yt($)}}}function Wf(e,t,n){let r,s,i,o,l;wt(e,Ft,$=>n(1,l=$));let c=0,a=l.misc.minTime,u=0,f="",d=`${new Date().getFullYear()}-${new Date().getMonth()+1}-${new Date().getDate()}`;function h(){if(u===0||f.trim()==="")return;const $=new Date().getTime(),U=$+u*1e3*60;l.tasks[f].work.push({uid:ct.uid,start:$,end:U}),n(9,u=0),n(4,f="")}function g(){if(u===0||f.trim()==="")return;const $=new Date().getTime(),U=$-u*1e3*60;l.tasks[f].work.push({uid:ct.uid,start:$,end:U}),n(9,u=0),n(4,f="")}const p=setInterval(()=>n(2,c=new Date().getTime()),38);Mn(()=>clearInterval(p));function _(){u=vn(this.value),n(9,u)}function v(){f=Li(this),n(4,f),n(5,o),n(1,l)}function A(){d=this.value,n(0,d)}function k(){a=vn(this.value),n(3,a)}const b=()=>Ri(Ft,l.misc.minTime=a,l);return e.$$.update=()=>{e.$$.dirty&1&&n(8,r=d.split("-")[0]),e.$$.dirty&1&&n(7,s=d.split("-")[1]),e.$$.dirty&1&&n(6,i=d.split("-")[2]),e.$$.dirty&2&&n(5,o=Object.entries(l.tasks).sort(($,U)=>$[1].name.localeCompare(U[1].name)))},[d,l,c,a,f,o,i,s,r,u,h,g,_,v,A,k,b]}class Gf extends pt{constructor(t){super(),gt(this,t,Wf,Yf,at,{})}}function qf(e){let t,n;return t=new Gf({}),{c(){H(t.$$.fragment)},m(r,s){P(t,r,s),n=!0},i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){z(t,r)}}}function Xf(e){let t,n;return t=new zf({}),{c(){H(t.$$.fragment)},m(r,s){P(t,r,s),n=!0},i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){z(t,r)}}}function Qf(e){let t,n;return t=new Ff({}),{c(){H(t.$$.fragment)},m(r,s){P(t,r,s),n=!0},i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){z(t,r)}}}function Zf(e){let t,n,r,s,i,o,l,c,a,u,f,d,h,g,p;const _=[Qf,Xf,qf],v=[];function A(k,b){return k[0]==="today"?0:k[0]==="tasks"?1:k[0]==="totals"?2:-1}return~(n=A(e))&&(r=v[n]=_[n](e)),l=new le({props:{icon:"schedule",size:"40px"}}),f=new le({props:{icon:"today",size:"40px"}}),{c(){t=y("div"),r&&r.c(),s=R(),i=y("div"),o=y("button"),H(l.$$.fragment),a=R(),u=y("button"),H(f.$$.fragment),w(t,"id","content"),w(t,"class","svelte-10finos"),w(o,"style",c=`background: ${e[0]==="today"?"lightgray":"white"}`),w(o,"class","svelte-10finos"),w(u,"style",d=`background: ${e[0]==="totals"?"lightgray":"white"}`),w(u,"class","svelte-10finos"),w(i,"id","btns"),w(i,"class","svelte-10finos")},m(k,b){O(k,t,b),~n&&v[n].m(t,null),O(k,s,b),O(k,i,b),m(i,o),P(l,o,null),m(i,a),m(i,u),P(f,u,null),h=!0,g||(p=[it(o,"click",e[1]),it(u,"click",e[2])],g=!0)},p(k,[b]){let $=n;n=A(k),n!==$&&(r&&(ht(),I(v[$],1,1,()=>{v[$]=null}),dt()),~n?(r=v[n],r||(r=v[n]=_[n](k),r.c()),D(r,1),r.m(t,null)):r=null),(!h||b&1&&c!==(c=`background: ${k[0]==="today"?"lightgray":"white"}`))&&w(o,"style",c),(!h||b&1&&d!==(d=`background: ${k[0]==="totals"?"lightgray":"white"}`))&&w(u,"style",d)},i(k){h||(D(r),D(l.$$.fragment,k),D(f.$$.fragment,k),h=!0)},o(k){I(r),I(l.$$.fragment,k),I(f.$$.fragment,k),h=!1},d(k){k&&C(t),~n&&v[n].d(),k&&C(s),k&&C(i),z(l),z(f),g=!1,yt(p)}}}function th(e,t,n){let r="today";return[r,()=>n(0,r="today"),()=>n(0,r="totals")]}class eh extends pt{constructor(t){super(),gt(this,t,th,Zf,at,{})}}function nh(e){let t,n,r,s,i,o,l,c,a,u,f,d,h,g,p,_;return{c(){t=y("div"),n=y("div"),n.textContent="SIGN UP",r=R(),s=y("div"),i=y("div"),i.textContent="Name",o=R(),l=y("input"),c=R(),a=y("div"),u=y("div"),u.textContent="Color",f=R(),d=y("input"),h=R(),g=y("button"),g.textContent="SIGN UP",w(n,"id","label"),w(n,"class","svelte-1voq6l1"),w(i,"class","svelte-1voq6l1"),w(l,"type","text"),w(l,"class","svelte-1voq6l1"),w(s,"id","name"),w(s,"class","svelte-1voq6l1"),w(u,"class","svelte-1voq6l1"),w(d,"type","color"),w(d,"class","svelte-1voq6l1"),w(a,"id","color"),w(a,"class","svelte-1voq6l1"),w(g,"id","btn"),w(g,"class","svelte-1voq6l1"),w(t,"id","form"),w(t,"class","svelte-1voq6l1")},m(v,A){O(v,t,A),m(t,n),m(t,r),m(t,s),m(s,i),m(s,o),m(s,l),At(l,e[0]),m(t,c),m(t,a),m(a,u),m(a,f),m(a,d),At(d,e[1]),m(t,h),m(t,g),p||(_=[it(l,"input",e[3]),it(d,"input",e[4]),it(g,"click",e[2])],p=!0)},p(v,[A]){A&1&&l.value!==v[0]&&At(l,v[0]),A&2&&At(d,v[1])},i:x,o:x,d(v){v&&C(t),p=!1,yt(_)}}}function rh(e,t,n){let r;wt(e,Ft,a=>n(5,r=a));let s="",i="#FF0000";function o(){s.trim()!==""&&(s.trim()==="Angel"&&(localStorage.setItem("uid","604b1901-954c-4b74-a7a4-206f61638d6f"),window.document.location.reload()),Object.entries(r.users).forEach(([a,u])=>{s.trim()===u.name.trim()&&(localStorage.setItem("uid",a),window.document.location.reload())}),Ri(Ft,r.users[ct.uid]={name:s,color:i},r),Ni("/"))}function l(){s=this.value,n(0,s)}function c(){i=this.value,n(1,i)}return[s,i,o,l,c]}class ul extends pt{constructor(t){super(),gt(this,t,rh,nh,at,{})}}function sh(e){let t,n,r,s,i,o,l=e[1].name+"",c,a,u,f,d=e[1].color+"",h;return{c(){t=y("div"),t.textContent="TODO - Allow editing of user information",n=R(),r=y("div"),r.textContent=`uid: ${ct.uid}`,s=R(),i=y("div"),o=j("name: "),c=j(l),a=R(),u=y("div"),f=j("color: "),h=j(d)},m(g,p){O(g,t,p),O(g,n,p),O(g,r,p),O(g,s,p),O(g,i,p),m(i,o),m(i,c),O(g,a,p),O(g,u,p),m(u,f),m(u,h)},p(g,p){p&2&&l!==(l=g[1].name+"")&&X(c,l),p&2&&d!==(d=g[1].color+"")&&X(h,d)},i:x,o:x,d(g){g&&C(t),g&&C(n),g&&C(r),g&&C(s),g&&C(i),g&&C(a),g&&C(u)}}}function ih(e){let t,n;return t=new ul({}),{c(){H(t.$$.fragment)},m(r,s){P(t,r,s),n=!0},p:x,i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){z(t,r)}}}function oh(e){let t,n,r,s;const i=[ih,sh],o=[];function l(c,a){return c[0].users[ct.uid]?1:0}return t=l(e),n=o[t]=i[t](e),{c(){n.c(),r=ce()},m(c,a){o[t].m(c,a),O(c,r,a),s=!0},p(c,[a]){let u=t;t=l(c),t===u?o[t].p(c,a):(ht(),I(o[u],1,1,()=>{o[u]=null}),dt(),n=o[t],n?n.p(c,a):(n=o[t]=i[t](c),n.c()),D(n,1),n.m(r.parentNode,r))},i(c){s||(D(n),s=!0)},o(c){I(n),s=!1},d(c){o[t].d(c),c&&C(r)}}}function lh(e,t,n){let r,s;return wt(e,Ft,i=>n(0,s=i)),e.$$.update=()=>{e.$$.dirty&1&&n(1,r=s.users[ct.uid])},[s,r]}class ch extends pt{constructor(t){super(),gt(this,t,lh,oh,at,{})}}function ah(e){let t,n,r=e[0].pathname+"",s;return{c(){t=j(`TODO - Not found.\r
`),n=y("div"),s=j(r)},m(i,o){O(i,t,o),O(i,n,o),m(n,s)},p(i,[o]){o&1&&r!==(r=i[0].pathname+"")&&X(s,r)},i:x,o:x,d(i){i&&C(t),i&&C(n)}}}function uh(e,t,n){let{location:r}=t;return e.$$set=s=>{"location"in s&&n(0,r=s.location)},[r]}class fh extends pt{constructor(t){super(),gt(this,t,uh,ah,at,{location:0})}}function hh(e){let t,n;return t=new eh({}),{c(){H(t.$$.fragment)},m(r,s){P(t,r,s),n=!0},i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){z(t,r)}}}function dh(e){let t,n;return t=new ch({}),{c(){H(t.$$.fragment)},m(r,s){P(t,r,s),n=!0},i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){z(t,r)}}}function gh(e){let t,n;return t=new ul({}),{c(){H(t.$$.fragment)},m(r,s){P(t,r,s),n=!0},i(r){n||(D(t.$$.fragment,r),n=!0)},o(r){I(t.$$.fragment,r),n=!1},d(r){z(t,r)}}}function ph(e){let t,n,r,s,i,o,l,c;return t=new on({props:{path:"/",$$slots:{default:[hh]},$$scope:{ctx:e}}}),r=new on({props:{path:"/account",$$slots:{default:[dh]},$$scope:{ctx:e}}}),i=new on({props:{path:"/register",$$slots:{default:[gh]},$$scope:{ctx:e}}}),l=new on({props:{path:"/*",component:fh}}),{c(){H(t.$$.fragment),n=R(),H(r.$$.fragment),s=R(),H(i.$$.fragment),o=R(),H(l.$$.fragment)},m(a,u){P(t,a,u),O(a,n,u),P(r,a,u),O(a,s,u),P(i,a,u),O(a,o,u),P(l,a,u),c=!0},p(a,u){const f={};u&8&&(f.$$scope={dirty:u,ctx:a}),t.$set(f);const d={};u&8&&(d.$$scope={dirty:u,ctx:a}),r.$set(d);const h={};u&8&&(h.$$scope={dirty:u,ctx:a}),i.$set(h)},i(a){c||(D(t.$$.fragment,a),D(r.$$.fragment,a),D(i.$$.fragment,a),D(l.$$.fragment,a),c=!0)},o(a){I(t.$$.fragment,a),I(r.$$.fragment,a),I(i.$$.fragment,a),I(l.$$.fragment,a),c=!1},d(a){z(t,a),a&&C(n),z(r,a),a&&C(s),z(i,a),a&&C(o),z(l,a)}}}function mh(e){let t,n,r,s,i;return n=new Nl({props:{$$slots:{default:[ph]},$$scope:{ctx:e}}}),{c(){t=y("main"),H(n.$$.fragment),r=R(),s=y("link"),w(t,"class","svelte-udafis"),w(s,"href","https://fonts.googleapis.com/icon?family=Material+Icons"),w(s,"rel","stylesheet")},m(o,l){O(o,t,l),P(n,t,null),O(o,r,l),O(o,s,l),i=!0},p(o,[l]){const c={};l&8&&(c.$$scope={dirty:l,ctx:o}),n.$set(c)},i(o){i||(D(n.$$.fragment,o),i=!0)},o(o){I(n.$$.fragment,o),i=!1},d(o){o&&C(t),z(n),o&&C(r),o&&C(s)}}}function wh(e,t,n){var o;let r;wt(e,Ft,l=>n(1,r=l)),localStorage.getItem("uid")||Ni("/register");const s=(o=localStorage.getItem("refreshToken"))!=null?o:"";let i=!1;return setTimeout(()=>n(0,i=!0),1e3),e.$$.update=()=>{e.$$.dirty&3&&i&&r.misc.refreshToken&&r.misc.refreshToken!==s&&(localStorage.setItem("refreshToken",r.misc.refreshToken),document.location.reload())},[i,r]}class _h extends pt{constructor(t){super(),gt(this,t,wh,mh,at,{})}}new _h({target:document.getElementById("app")});
